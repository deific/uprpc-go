"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[866],{88642:function(cn,we,i){i.r(we),i.d(we,{default:function(){return rn}});var Ke=i(42805),Je=i(15009),f=i.n(Je),Ge=i(99289),X=i.n(Ge),We=i(64599),T=i.n(We),Ye=i(5574),z=i.n(Ye),Z=i(67294),ae=i(71217),xe=i(13448),Le=i(16536),Xe=i(67040),ie=i(26713),me=i(34895),Ce=i(62986),Qe=i(37877),Q=i(97183),je=i(71230),q=i(15746),G=i(84908),pe=i(80284),qe=i(26911),_e=i(69015),et=i(13520),Ee=i(18429),tt=i(238),nt=i(80882),Ue=i(64789),rt=i(33160),st=i(48689),at=i(32319),it=i(26024),ot=i(12444),oe=i.n(ot),lt=i(72004),le=i.n(lt),ut=i(9783),y=i.n(ut),Ie=i(68949),dt=i(97857),m=i.n(dt),Be="includeDirs",Ze="protos";function ct(t,r,e){var a=T()(t.methods),s;try{for(a.s();!(s=a.n()).done;){var o=s.value;if(r==o.serviceName&&o.name==e)return o}}catch(u){a.e(u)}finally{a.f()}return null}function Pe(t){for(var r=ue(),e=0,a=r;e<a.length;e++){var s=a[e];if(s.path==t)return s}return null}function ue(){var t=localStorage.getItem(Ze);return t==null?[]:JSON.parse(t)}function ht(t){var r=T()(t),e;try{for(r.s();!(e=r.n()).done;){var a=e.value;De(a)}}catch(s){r.e(s)}finally{r.f()}}function De(t){for(var r=ue(),e=0;e<r.length;e++)if(r[e].path===t.path){r.splice(e,1);break}r.push(t),localStorage.setItem(Ze,JSON.stringify(r))}function ft(t){var r=T()(t),e;try{for(r.s();!(e=r.n()).done;){var a=e.value;vt(a)}}catch(s){r.e(s)}finally{r.f()}}function vt(t){var r=Pe(t.path);if(r!=null){var e=m()(m()({},t),{},{host:r.host}),a=T()(e.methods),s;try{for(a.s();!(s=a.n()).done;){var o=s.value,u=ct(r,o.serviceName,o.name);if(u!=null){o.id=u.id,o.requestMds=u.requestMds,o.responseMds=u.responseMds;var h=o.requestBody?JSON.parse(o.requestBody):{},c=u.requestBody?JSON.parse(u.requestBody):{};for(var j in h)c[j]!=null&&(h[j]=c[j]);o.requestBody=JSON.stringify(h,null,"	")}}}catch(I){a.e(I)}finally{a.f()}De(e)}}function gt(t){for(var r=ue(),e=0;e<r.length;e++)if(r[e].path===t){r.splice(e,1);break}localStorage.setItem(Ze,JSON.stringify(r))}function mt(t){var r=Pe(t);return r==null?[]:r.methods}function W(){var t=localStorage.getItem(Be);return t==null?[]:JSON.parse(t)}function pt(t){for(var r=W(),e=0;e<r.length;e++)if(r[e]===t){r.splice(e,1);break}r.push(t),localStorage.setItem(Be,JSON.stringify(r))}function yt(t){for(var r=W(),e=0;e<r.length;e++)if(r[e]===t){r.splice(e,1);break}localStorage.setItem(Be,JSON.stringify(r))}var St=function(){function t(){oe()(this,t),y()(this,"includeDirDrawerVisible",!1),y()(this,"includeDirs",[]),console.log("init paths store"),(0,Ie.ky)(this),this.init()}return le()(t,[{key:"init",value:f()().mark(function r(){return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:this.includeDirs=W();case 1:case"end":return a.stop()}},r,this)})},{key:"showIncludeDir",value:function(e){this.includeDirDrawerVisible=e}},{key:"addIncludeDir",value:f()().mark(function r(){var e;return f()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,window.rpc.openIncludeDir();case 2:e=s.sent,e.success&&(pt(e.data),this.includeDirs=W());case 4:case"end":return s.stop()}},r,this)})},{key:"removeIncludeDir",value:f()().mark(function r(e){return f()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:yt(e);case 1:case"end":return s.stop()}},r)})}]),t}(),xt=function(){function t(){oe()(this,t),y()(this,"selectedTab","1"),y()(this,"openTabs",[]),console.log("init tab store"),(0,Ie.ky)(this)}return le()(t,[{key:"selectTab",value:function(e){this.selectedTab=e}},{key:"setDot",value:function(e){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.openTabs.forEach(function(o,u){o.key==e&&(o.dot=s,a.openTabs.splice(u,1,o))})}},{key:"openTab",value:function(e){this.openTabs.length==1&&this.openTabs[0].key==="1"&&this.openTabs.splice(0,1);var a=this.openTabs.findIndex(function(s){return s.key===e.key});a==-1&&this.openTabs.push(e),this.selectedTab=e.key}},{key:"remove",value:function(e){var a=this;this.openTabs.forEach(function(s,o){if(s.key==e){if(a.openTabs.splice(o,1),a.openTabs.length==0)return;var u=o<a.openTabs.length?o:a.openTabs.length-1;a.selectedTab=a.openTabs[u].key}})}}]),t}(),_,l;(function(t){t[t.Text=0]="Text",t[t.Int8=1]="Int8",t[t.Int16LE=2]="Int16LE",t[t.Int16BE=3]="Int16BE",t[t.Int32LE=4]="Int32LE",t[t.Int32BE=5]="Int32BE",t[t.FloatLE=6]="FloatLE",t[t.FloatBE=7]="FloatBE",t[t.DoubleLE=8]="DoubleLE",t[t.DoubleBE=9]="DoubleBE",t[t.Uint8=10]="Uint8",t[t.Uint16LE=11]="Uint16LE",t[t.Uint16BE=12]="Uint16BE",t[t.Uint32LE=13]="Uint32LE",t[t.Uint32BE=14]="Uint32BE",t[t.BigInt64BE=15]="BigInt64BE",t[t.BigInt64LE=16]="BigInt64LE",t[t.BigUint64BE=17]="BigUint64BE",t[t.BigUint64LE=18]="BigUint64LE"})(l||(l={}));var Oe=new Map([[l.Text,"Text"],[l.Int8,"Int8"],[l.Int16LE,"Int16LE"],[l.Int16BE,"Int16BE"],[l.Int32LE,"Int32LE"],[l.Int32BE,"Int32BE"],[l.FloatLE,"FloatLE"],[l.FloatBE,"FloatBE"],[l.DoubleLE,"DoubleLE"],[l.DoubleBE,"DoubleBE"],[l.Uint8,"UInt8"],[l.Uint16LE,"Uint16LE"],[l.Uint16BE,"Uint16BE"],[l.Uint32LE,"Uint32LE"],[l.Uint32BE,"Uint32BE"],[l.BigInt64BE,"BigInt64BE"],[l.BigInt64LE,"BigInt64LE"],[l.BigUint64BE,"BigUint64BE"],[l.BigUint64LE,"BigUint64LE"]]),F;(function(t){t[t.Unary=0]="Unary",t[t.ClientStream=1]="ClientStream",t[t.ServerStream=2]="ServerStream",t[t.BidirectionalStream=3]="BidirectionalStream"})(F||(F={}));var Ct=(_={},y()(_,F.Unary,"Unary Call"),y()(_,F.ClientStream,"Client Stream"),y()(_,F.ServerStream,"Server Stream"),y()(_,F.BidirectionalStream,"Bi-Directional"),_),ye;(function(t){t[t.Proto=0]="Proto",t[t.Env=1]="Env"})(ye||(ye={}));function jt(){return window.go.main.Api.OpenProto()}function Et(t,r){return window.go.main.Api.ParseProto(t,r)}function It(t){return window.go.main.Api.Send(t)}function hn(t){return window.go.main.Api.Stop(t)}var be;(function(t){var r=function(){function e(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};oe()(this,e),y()(this,"id",void 0),y()(this,"protoPath",void 0),y()(this,"serviceName",void 0),y()(this,"serviceFullyName",void 0),y()(this,"methodName",void 0),y()(this,"methodMode",void 0),y()(this,"host",void 0),y()(this,"body",void 0),y()(this,"mds",void 0),y()(this,"includeDirs",void 0),typeof a=="string"&&(a=JSON.parse(a)),this.id=a.id,this.protoPath=a.protoPath,this.serviceName=a.serviceName,this.serviceFullyName=a.serviceFullyName,this.methodName=a.methodName,this.methodMode=a.methodMode,this.host=a.host,this.body=a.body,this.mds=a.mds,this.includeDirs=a.includeDirs}return le()(e,null,[{key:"createFrom",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new e(s)}}]),e}();t.RequestData=r})(be||(be={}));var Fe;(function(t){var r=function(){function e(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};oe()(this,e),y()(this,"success",void 0),y()(this,"message",void 0),y()(this,"data",void 0),typeof a=="string"&&(a=JSON.parse(a)),this.success=a.success,this.message=a.message,this.data=a.data}return le()(e,null,[{key:"createFrom",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new e(s)}}]),e}();t.R=r})(Fe||(Fe={}));var Bt=function(){function t(){oe()(this,t),y()(this,"protos",[]),y()(this,"requestCaches",new Map),y()(this,"responseCaches",new Map),y()(this,"runningCaches",new Map),console.log("init rpc store"),(0,Ie.ky)(this),this.init()}return le()(t,[{key:"init",value:function(){this.initProto()}},{key:"initProto",value:function(){this.protos=ue()}},{key:"onEndStream",value:function(){var e=this;window.rpc.handleEndStream(function(a,s){e.runningCaches.set(s,!1)})}},{key:"onResponse",value:function(){var e=this;window.rpc.handleResponse(function(a,s){console.log("Response data1: ",s);var o=e.responseCaches.get(s.id);if(o==null){e.responseCaches.set(s.id,{body:s.body,mds:s.mds,streams:[s.body]});return}var u=o.streams;u!=null&&(u.unshift(s.body),e.responseCaches.set(s.id,m()(m()({},o),{},{streams:u,mds:s.mds})))})}},{key:"importProto",value:f()().mark(function r(){var e;return f()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,jt();case 2:e=s.sent;debugger;if(e.success){s.next=6;break}return s.abrupt("return",e);case 6:return s.next=8,Et(e.data,W());case 8:return e=s.sent,ht(e.data),this.initProto(),s.abrupt("return",{success:!0});case 12:case"end":return s.stop()}},r,this)})},{key:"reloadProto",value:f()().mark(function r(){var e,a;return f()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return e=[],ue().forEach(function(u){return e.push(u.path)}),o.next=4,window.rpc.parseProto(e,W());case 4:if(a=o.sent,a.success){o.next=8;break}return console.log("reload proto error"),o.abrupt("return");case 8:ft(a.data),this.initProto();case 10:case"end":return o.stop()}},r,this)})},{key:"deleteProto",value:f()().mark(function r(e){return f()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:gt(e),this.initProto();case 2:case"end":return s.stop()}},r,this)})},{key:"saveProto",value:f()().mark(function r(e,a,s){var o,u;return f()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:for(console.log("save proto method",s),e.host=a,o=0;o<e.methods.length;o++)u=e.methods[o],u.id==s.id&&(e.methods[o]=s);De(e),this.initProto();case 5:case"end":return c.stop()}},r,this)})},{key:"send",value:f()().mark(function r(e){return f()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return this.removeCache(e.id),s.next=3,this.push(e);case 3:e.methodMode!=F.Unary&&this.runningCaches.set(e.id,!0);case 4:case"end":return s.stop()}},r,this)})},{key:"push",value:f()().mark(function r(e){var a,s;return f()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:console.log("send request data",e),a=this.requestCaches.get(e.id),a==null?this.requestCaches.set(e.id,{streams:[e.body]}):(s=a.streams,s==null||s.unshift(e.body),this.requestCaches.set(e.id,{streams:s})),e.includeDirs=W();debugger;return u.next=7,It(new be.RequestData(e));case 7:case"end":return u.stop()}},r,this)})},{key:"removeCache",value:f()().mark(function r(e){return f()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:this.requestCaches.delete(e),this.responseCaches.delete(e),this.runningCaches.delete(e);case 3:case"end":return s.stop()}},r,this)})},{key:"stopStream",value:f()().mark(function r(e){return f()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log("request stop stream2"),s.next=3,window.rpc.stopStream(e);case 3:this.runningCaches.set(e,!1);case 4:case"end":return s.stop()}},r,this)})}]),t}(),Me=new St,Ne=new xt,Re=new Bt,ee=(0,Z.createContext)({includeDirStore:Me,tabStore:Ne,protoStore:Re}),Zt=i(63463),V=i(71577),ze=i(95507),fn=i(70133),Te=i(24969),Dt=i(97937),n=i(85893),bt=function(){var r=(0,Z.useContext)(ee),e=r.includeDirStore;return(0,n.jsx)(Zt.Z,{title:"Import Paths",placement:"left",width:500,open:e.includeDirDrawerVisible,onClose:function(){return e.showIncludeDir(!1)},style:{padding:5},bodyStyle:{padding:5},extra:(0,n.jsx)(V.Z,{type:"link",icon:(0,n.jsx)(Te.Z,{}),onClick:function(){return e.addIncludeDir()},children:"Add Path"}),children:(0,n.jsx)(ze.ZP,{size:"large",loadMore:(0,n.jsx)("div",{}),dataSource:e.includeDirs,renderItem:function(s){return(0,n.jsx)(ze.ZP.Item,{actions:[(0,n.jsx)("a",{onClick:function(){return e.removeIncludeDir(s)},children:(0,n.jsx)(Dt.Z,{})})],children:s})}})})},kt=(0,ae.Pi)(bt),wt=function(){var r=(0,Z.useContext)(ee),e=r.tabStore,a=r.protoStore,s=r.includeDirStore,o=(0,Z.useState)(!1),u=z()(o,2),h=u[0],c=u[1],j=(0,Z.useState)([]),I=z()(j,2),S=I[0],C=I[1],d=(0,Z.useState)(""),B=z()(d,2),k=B[0],ne=B[1],fe=(0,Z.useState)(!0),K=z()(fe,2),re=K[0],Y=K[1],ve=(0,Z.useState)(),M=z()(ve,2),D=M[0],U=M[1],J=function(p){c(p),p||ne("")},w=function(p){C(p),Y(!1)},v=function(p){var E=new Set,g=T()(a.protos),b;try{for(g.s();!(b=g.n()).done;){var A=b.value;A.name.toLowerCase().indexOf(p.toLowerCase())>-1&&E.add(A.path);var L=T()(A.methods),N;try{for(L.s();!(N=L.n()).done;){var $=N.value;$.serviceName.toLowerCase().indexOf(p.toLowerCase())>-1&&E.add(A.path+$.serviceName),$.name.toLowerCase().indexOf(p.toLowerCase())>-1&&E.add($.id)}}catch(R){L.e(R)}finally{L.f()}}}catch(R){g.e(R)}finally{g.f()}return Array.from(E)},P=function(p){var E=p.target.value,g=v(E);console.log(E,g),C(g),ne(E),Y(!0)},x=function(p,E){var g=p.toLowerCase().indexOf(k.toLowerCase()),b=p.substring(0,g),A=p.substring(g,g+k.length),L=p.slice(g+k.length),N=g>-1?(0,n.jsxs)("span",{children:[b,(0,n.jsx)("span",{style:{color:"#f50"},children:A}),L]}):(0,n.jsx)("span",{children:p});return N},sn=function(p){var E=[],g=T()(p),b;try{var A=function(){var N=b.value,$={key:N.path,title:(0,n.jsx)("span",{style:{width:"100%"},children:x(N.name,k)}),icon:(0,n.jsx)(qe.Z,{}),children:[]},R=new Map;N.methods.forEach(function(H,se,ge){var Se=R.get(H.serviceName);Se==null&&(Se=[]),Se.push({key:H.id,title:x(H.name,k),icon:(0,n.jsx)(_e.Z,{})}),R.set(H.serviceName,Se)}),R.forEach(function(H,se,ge){$.children.push({key:N.path+se,title:x(se,k),icon:(0,n.jsx)(et.Z,{}),children:H})}),E.push($)};for(g.s();!(b=g.n()).done;)A()}catch(L){g.e(L)}finally{g.f()}return E},an=function(p,E){U(void 0);var g=E.node.pos.split("-");if(g.length==2){var b=a.protos[g[1]];U({id:b.path,name:b.name})}else g.length==4&&e.openTab({key:p[0].toString(),params:E.node.pos,type:ye.Proto})},on=function(){var O=X()(f()().mark(function p(){var E;return f()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,a.importProto();case 2:E=b.sent,E.success||xe.Z.open({message:"Error while importing protos",description:E.message,icon:(0,n.jsx)(Ee.Z,{style:{color:"red"}})});case 4:case"end":return b.stop()}},p)}));return function(){return O.apply(this,arguments)}}(),ln=function(){a.reloadProto(),Le.ZP.success("Reload protos successful.")},un=function(){var O=X()(f()().mark(function p(){return f()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(D!=null){g.next=3;break}return Le.ZP.warn("Please select the deleted proto."),g.abrupt("return");case 3:Xe.Z.confirm({title:"Confirm delete proto",content:"Do you want to remove the proto configuration ".concat(D.name,"?"),onOk:function(){var A=mt(D.id),L=T()(A),N;try{for(L.s();!(N=L.n()).done;){var $=N.value,R=T()(e.openTabs),H;try{for(R.s();!(H=R.n()).done;){var se=H.value;if(se.key==$.id){e.remove(se.key);break}}}catch(ge){R.e(ge)}finally{R.f()}}}catch(ge){L.e(ge)}finally{L.f()}a.deleteProto(D.id),U(void 0)}});case 4:case"end":return g.stop()}},p)}));return function(){return O.apply(this,arguments)}}(),He=sn(a.protos),dn=[{label:(0,n.jsxs)(ie.Z,{direction:"vertical",size:0,align:"center",children:[(0,n.jsx)(tt.Z,{style:{fontSize:20,marginRight:0}}),(0,n.jsx)("div",{style:{fontSize:10},children:"GRPC"})]}),key:"1",children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(me.Z,{size:"small",placeholder:"Filter Methods",hidden:!h,onChange:P,value:k,style:{marginBottom:5}}),He.length==0?(0,n.jsx)("div",{style:{height:"90%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,n.jsx)(Ce.Z,{description:"No proto"})}):(0,n.jsx)(Qe.Z.DirectoryTree,{onExpand:w,expandedKeys:S,autoExpandParent:re,onSelect:an,switcherIcon:(0,n.jsx)(nt.Z,{}),defaultExpandedKeys:["0-0-0"],treeData:He})]})}];return(0,n.jsxs)(Q.Z,{style:{height:"100%"},children:[(0,n.jsx)(Q.Z.Header,{style:{padding:0,backgroundColor:"white",height:"44px",lineHeight:"44px",borderBottom:"1px solid #f0f0f0"},children:(0,n.jsxs)(je.Z,{children:[(0,n.jsx)(q.Z,{flex:"auto",style:{paddingLeft:10,fontSize:18},children:"upRpc"}),(0,n.jsx)(q.Z,{flex:"100px",children:(0,n.jsxs)(ie.Z,{size:8,style:{paddingRight:10},children:[(0,n.jsx)(G.Z,{title:"Import protos",children:(0,n.jsx)("a",{style:{color:"#000000D9",fontSize:16},onClick:on,children:(0,n.jsx)(Ue.Z,{})})}),(0,n.jsx)(G.Z,{title:"Reload protos",children:(0,n.jsx)("a",{style:{color:"#000000D9",fontSize:16},onClick:ln,children:(0,n.jsx)(rt.Z,{})})}),(0,n.jsx)(G.Z,{title:"Delete selectecd proto",children:(0,n.jsx)("a",{style:{color:"#000000D9",fontSize:16},onClick:un,children:(0,n.jsx)(st.Z,{})})}),(0,n.jsx)(G.Z,{title:"Import dependency paths",children:(0,n.jsx)("a",{style:{color:"#000000D9",fontSize:16},onClick:function(){return s.showIncludeDir(!s.includeDirDrawerVisible)},children:(0,n.jsx)(at.Z,{})})}),(0,n.jsx)(G.Z,{title:"Filter methods",children:(0,n.jsx)("a",{style:{color:"#000000D9",fontSize:16},onClick:function(){return J(!h)},children:(0,n.jsx)(it.Z,{})})})]})})]})}),(0,n.jsxs)(Q.Z.Content,{style:{backgroundColor:"white"},children:[(0,n.jsx)(pe.Z,{tabPosition:"left",size:"small",style:{height:"100%"},items:dn}),(0,n.jsx)(kt,{})]})]})},Lt=(0,ae.Pi)(wt),de=i(70524),te=i(21369),Ut=i(63922),Pt=i(99611),Ot=i(93045),Ft=i(33859),Mt=function(){var r=(0,Z.useContext)(ee),e=r.protoStore,a=function(){var s=X()(f()().mark(function o(){var u;return f()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,e.importProto();case 2:u=c.sent,u.success||xe.Z.open({message:"Error while importing protos",description:u.message,icon:(0,n.jsx)(Ee.Z,{style:{color:"red"}})});case 4:case"end":return c.stop()}},o)}));return function(){return s.apply(this,arguments)}}();return(0,n.jsx)("div",{style:{height:"90%",width:"90%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,n.jsx)(Ft.ZP,{icon:(0,n.jsx)(Ot.Z,{style:{fontSize:120}}),title:"Welcome to use upRpc",subTitle:"Swim in the ocean of knowledge and enjoy it.",extra:(0,n.jsx)(V.Z,{type:"primary",onClick:function(){return a()},icon:(0,n.jsx)(Te.Z,{}),children:"Import Protos"})})})},Nt=(0,ae.Pi)(Mt),ce={header:"header___tHXcr",requestStreamHeight:"requestStreamHeight___LV6s3",metadataColumn:"metadataColumn___o3Lum"},Rt=i(36027),zt=i(28280),Tt=i(27496),Vt=i(74842),At=i(60219),he=i(1769),Ve=i(74981),vn=i(90252),gn=i(82679),Ae=i(54907),$e=function(t){var r=t.value,e=(0,Z.useState)("1"),a=z()(e,2),s=a[0],o=a[1];return r==null?(0,n.jsx)(Ce.Z,{image:Ce.Z.PRESENTED_IMAGE_SIMPLE}):(0,n.jsx)(Ae.Z,{activeKey:s,accordion:!0,onChange:function(h){return o(h)},children:r==null?void 0:r.map(function(u,h){return u==null||u==""?!0:(0,n.jsx)(Ae.Z.Panel,{header:"stream-"+((r==null?void 0:r.length)-h),children:(0,n.jsx)("pre",{style:{padding:0},children:u})},h+1)})})};function $t(t,r){if(l.Text==r)return new TextEncoder().encode(t);var e=new DataView(new ArrayBuffer(16));switch(r){case l.Int8:e.setInt8(0,t);break;case l.Int16LE:e.setInt16(0,t,!0);break;case l.Int16BE:e.setInt16(0,t,!1);break;case l.Int32LE:e.setInt32(0,t,!0);break;case l.Int32BE:e.setInt32(0,t,!1);break;case l.FloatLE:e.setFloat32(0,t,!0);break;case l.FloatBE:e.setFloat32(0,t,!1);break;case l.DoubleLE:e.setFloat64(0,t,!0);break;case l.DoubleBE:e.setFloat64(0,t,!1);break;case l.Uint8:e.setUint8(0,t);break;case l.Uint16LE:e.setUint16(0,t,!0);break;case l.Uint16BE:e.setUint16(0,t,!1);break;case l.Uint32LE:e.setUint32(0,t,!0);break;case l.Uint32BE:e.setUint32(0,t,!1);break;case l.BigInt64LE:e.setBigInt64(0,t,!0);break;case l.BigInt64BE:e.setBigInt64(0,t,!1);break;case l.BigUint64LE:e.setBigUint64(0,t,!0);break;case l.BigUint64BE:e.setBigInt64(0,t,!1);break}return e}function Ht(t,r){if(l.Text==r)return new TextDecoder().decode(t);var e=new DataView(t.buffer,t.byteOffset,t.byteLength);try{switch(r){case l.Int8:return e.getInt8(0).toString();case l.Int16LE:return e.getInt16(0,!0).toString();case l.Int16BE:return e.getInt16(0,!1).toString();case l.Int32LE:return e.getInt32(0,!0).toString();case l.Int32BE:return e.getInt32(0,!1).toString();case l.FloatLE:return e.getFloat32(0,!0).toString();case l.FloatBE:return e.getFloat32(0,!1).toString();case l.DoubleLE:return e.getFloat64(0,!0).toString();case l.DoubleBE:return e.getFloat64(0,!1).toString();case l.Uint8:return e.getUint8(0).toString();case l.Uint16LE:return e.getUint16(0,!0).toString();case l.Uint16BE:return e.getUint16(0,!1).toString();case l.Uint32LE:return e.getUint32(0,!0).toString();case l.Uint32BE:return e.getUint32(0,!1).toString();case l.BigInt64LE:return e.getBigInt64(0,!0).toString().toString();case l.BigInt64BE:return e.getBigInt64(0,!1).toString();case l.BigUint64LE:return e.getBigUint64(0,!0).toString();case l.BigUint64BE:return e.getBigInt64(0,!1).toString();default:return"[Buffer ... "+t.length+" bytes]"}}catch{return"decode error"}}var Kt=function(t){var r=t.method,e=t.responseCache,a=t.onChange,s=function(S,C,d){if(console.log(" response mds: ",r.responseMds),r.responseMds==null)r.responseMds=[];else for(var B=0;B<r.responseMds.length;B++)r.responseMds[B].id==S&&r.responseMds.splice(B,1);r.responseMds.push({id:S,key:C,parseType:d}),a(m()({},r))},o=function(S){if(r.responseMds==null)return 0;var C=T()(r.responseMds),d;try{for(C.s();!(d=C.n()).done;){var B=d.value;if(B.id==S)return B.parseType}}catch(k){C.e(k)}finally{C.f()}return 0},u=[{title:"KEY",dataIndex:"key",key:"name",width:"200px"},{title:"VALUE",dataIndex:"value",key:"value",render:function(S,C){return/-bin$/.test(C.key)?(0,n.jsx)(Jt,{id:C.id,value:C.value,parseType:o(C.id),onChange:function(B,k){return s(B,C.key,k)}}):S}}],h=(0,n.jsx)(n.Fragment,{});(e==null?void 0:e.mds)!=null&&(h=(0,n.jsxs)(n.Fragment,{children:[" (",e.mds.length,")"]}));var c=r.mode==F.ServerStream||r.mode==F.BidirectionalStream?{key:"response",label:"Response Stream",children:(0,n.jsx)($e,{value:e==null?void 0:e.streams})}:{key:" response",label:"Response",children:(0,n.jsx)(Ve.ZP,{style:{background:"#fff"},width:"100%",height:"100%",mode:"json",theme:"textmate",name:"inputs",fontSize:13,cursorStart:2,highlightActiveLine:!1,showPrintMargin:!1,showGutter:!1,value:e==null?void 0:e.body,setOptions:{showLineNumbers:!1,highlightGutterLine:!1,fixedWidthGutter:!1,tabSize:1,displayIndentGuides:!1},readOnly:!0,tabSize:2})};console.log("responseCache: ",e);var j=[c,{label:(0,n.jsxs)(n.Fragment,{children:["Metadata",h]}),key:"matadata",children:(0,n.jsx)(he.Z,{size:"small",bordered:!0,pagination:!1,columns:u,rowKey:"id",dataSource:e==null?void 0:e.mds})}];return(0,n.jsx)(pe.Z,{style:{height:"100%"},animated:!1,items:j})},Jt=function(r){var e=r.id,a=r.value,s=r.parseType,o=r.onChange,u=[];return Oe.forEach(function(h,c){return u.push((0,n.jsx)(te.Z.Option,{value:c.toString(),children:h},c))}),(0,n.jsxs)(je.Z,{children:[(0,n.jsx)(q.Z,{flex:"auto",style:{display:"flex",alignItems:"center"},children:Ht(a,s)}),(0,n.jsx)(q.Z,{flex:"100px",children:(0,n.jsx)(te.Z,{defaultValue:s.toString(),bordered:!1,onChange:function(c){return o(e,Number.parseInt(c))},style:{width:140},children:u},"s1"+e)})]})},Gt=i(19632),ke=i.n(Gt),Wt=i(81474),Yt=i(16596),Xt=i(3089),Qt=function(t){var r=t.running,e=t.method,a=t.requestCache,s=t.onChange,o=t.onPush,u=(0,Z.useState)(e.requestBody),h=z()(u,2),c=h[0],j=h[1],I=function(D){s&&s(m()(m()({},e),{},{requestBody:D})),j(D)},S=(0,Z.useState)(e.requestMds==null?[]:e.requestMds),C=z()(S,2),d=C[0],B=C[1],k=function(D){d[D.id]=D,B(ke()(d)),s&&s(m()(m()({},e),{},{requestMds:d}))},ne=function(){d.push({parseType:0,id:d.length,key:"",value:""}),B(ke()(d))},fe=function(D){d.splice(D,1),B(ke()(d)),s&&s(m()(m()({},e),{},{requestMds:d}))},K=(0,n.jsx)(n.Fragment,{});d!==null&&d.length>0&&(K=(0,n.jsxs)(n.Fragment,{children:[" (",d.length,")"]}));var re=e.mode==F.ClientStream||e.mode==F.BidirectionalStream,Y=r&&re?(0,n.jsx)(V.Z,{size:"small",type:"primary",icon:(0,n.jsx)(Yt.Z,{}),onClick:function(){return o(c)},children:"Push"}):"",ve=[{label:"Params",key:"params",children:(0,n.jsx)(Ve.ZP,{style:{background:"#fff"},width:"100%",height:"100%",mode:"json",theme:"textmate",name:"inputs",fontSize:13,cursorStart:2,showPrintMargin:!1,showGutter:!0,onChange:I,defaultValue:e.requestBody,setOptions:{useWorker:!0,displayIndentGuides:!0},tabSize:2})},{label:(0,n.jsxs)(n.Fragment,{children:["Metadata",K]}),key:"metadata",children:(0,n.jsxs)(he.Z,{rowKey:"id",size:"small",bordered:!0,pagination:!1,dataSource:d,children:[(0,n.jsx)(he.Z.Column,{className:ce.metadataColumn,dataIndex:"key",title:"KEY",width:"30%",render:function(D,U,J){return(0,n.jsx)(me.Z,{defaultValue:U.key,onChange:function(v){return k(m()(m()({},U),{},{key:v.target.value}))}},"key"+U.id)}},"key"),(0,n.jsx)(he.Z.Column,{className:ce.metadataColumn,dataIndex:"value",title:"VALUE",render:function(D,U,J){return(0,n.jsx)(qt,{metadata:U,onChange:function(v){return k(m()(m()({},v),{},{key:U.key}))}})}},"value"),(0,n.jsx)(he.Z.Column,{className:ce.metadataColumn,dataIndex:"action",align:"center",width:80,title:(0,n.jsx)(G.Z,{title:"Add metadata",children:(0,n.jsx)(V.Z,{size:"small",type:"text",icon:(0,n.jsx)(Ue.Z,{}),onClick:ne})}),render:function(D,U,J){return(0,n.jsx)(G.Z,{title:"Delete metadata",placement:"bottom",children:(0,n.jsx)(V.Z,{size:"small",type:"text",icon:(0,n.jsx)(Xt.Z,{}),onClick:function(){return fe(J)}})})}},"action")]})}];return(0,n.jsxs)(de.oL,{children:[(0,n.jsx)(pe.Z,{style:{height:"100%"},animated:!1,items:ve,tabBarExtraContent:(0,n.jsx)("div",{style:{paddingRight:10},children:Y})}),(0,n.jsx)(de.oL.Pane,{visible:re,className:ce.requestStreamHeight,children:(0,n.jsx)(Wt.Z,{title:"Request Stream",size:"small",bordered:!1,style:{height:"100%",marginTop:"3px"},bodyStyle:{height:"calc(100% - 40px)",overflow:"auto",padding:0},children:(0,n.jsx)($e,{value:a==null?void 0:a.streams})})})]})},qt=function(r){var e=r.metadata,a=r.onChange,s=(0,Z.useState)(e),o=z()(s,2),u=o[0],h=o[1],c=function(S){h(S),a(S)},j=[];return Oe.forEach(function(I,S){return j.push((0,n.jsx)(te.Z.Option,{value:S.toString(),children:I},S))}),(0,n.jsxs)("div",{style:{display:"flex"},children:[(0,n.jsx)(me.Z,{defaultValue:u.value,onChange:function(S){return c(m()(m()({},u),{},{value:S.target.value}))}},"v"+u.id),e.key.endsWith("-bin")?(0,n.jsx)(te.Z,{defaultValue:u.parseType.toString(),bordered:!1,onChange:function(S){return c(m()(m()({},u),{},{parseType:Number.parseInt(S)}))},style:{width:140},children:j},"s"+u.id):""]})},_t=function(r){var e=r.proto,a=r.method,s=(0,Z.useContext)(ee),o=s.protoStore,u=s.tabStore,h=(0,Z.useState)(e.host),c=z()(h,2),j=c[0],I=c[1],S=(0,Z.useState)(a),C=z()(S,2),d=C[0],B=C[1],k=function(v){u.setDot(d.id),I(v)},ne=function(v){u.setDot(v.id),B(m()(m()({},v),{},{requestBody:v.requestBody,requestMds:v.requestMds}))},fe=function(v){u.setDot(v.id),B(m()(m()({},v),{},{responseMds:v.responseMds}))},K=function(){var v=[];return d.requestMds!=null&&d.requestMds.length>0&&(v=d.requestMds.map(function(P,x){return P.key.endsWith("-bin")?m()(m()({},P),{},{key:P.key,value:$t(P.value,P.parseType)}):m()(m()({},P),{},{key:P.key,value:P.value})})),{id:d.id,body:d.requestBody,mds:v,methodMode:d.mode,methodName:d.name,serviceFullyName:d.serviceFullyName,serviceName:d.serviceName,protoPath:e.path,host:j}},re=function(){var w=X()(f()().mark(function v(){return f()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,o.push(K());case 2:case"end":return x.stop()}},v)}));return function(){return w.apply(this,arguments)}}(),Y=function(){var w=X()(f()().mark(function v(){return f()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.prev=0,x.next=3,o.send(K());case 3:x.next=8;break;case 5:x.prev=5,x.t0=x.catch(0),xe.Z.open({message:"Calling error",description:x.t0.message,icon:(0,n.jsx)(Ee.Z,{style:{color:"red"}})});case 8:case"end":return x.stop()}},v,null,[[0,5]])}));return function(){return w.apply(this,arguments)}}(),ve=function(){var w=X()(f()().mark(function v(){return f()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,o.stopStream(d.id);case 2:case"end":return x.stop()}},v)}));return function(){return w.apply(this,arguments)}}(),M=function(){o.saveProto(e,j,d),u.setDot(d.id,!1)},D=o.requestCaches.get(d.id),U=o.responseCaches.get(d.id),J=o.runningCaches.get(d.id);return(0,n.jsxs)(Q.Z,{style:{height:"100%",backgroundColor:"white",padding:"0px 10px"},children:[(0,n.jsx)(Q.Z.Header,{className:ce.header,style:{paddingBottom:10},children:(0,n.jsxs)(je.Z,{gutter:5,children:[(0,n.jsx)(q.Z,{flex:"auto",style:{paddingTop:5},children:(0,n.jsx)(me.Z,{addonBefore:(0,n.jsxs)(ie.Z,{style:{width:110},children:[(0,n.jsx)(Rt.Z,{}),Ct[d.mode]]}),defaultValue:j,onChange:function(v){return k(v.target.value)}})}),(0,n.jsx)(q.Z,{flex:"160px",children:(0,n.jsxs)(ie.Z,{children:[J?(0,n.jsx)(V.Z,{type:"primary",icon:(0,n.jsx)(zt.Z,{}),onClick:ve,children:"Stop"}):d.mode==F.Unary?(0,n.jsx)(V.Z,{type:"primary",icon:(0,n.jsx)(Tt.Z,{}),onClick:Y,children:"Send"}):(0,n.jsx)(V.Z,{type:"primary",icon:(0,n.jsx)(Vt.Z,{}),onClick:Y,children:"Start"}),(0,n.jsx)(V.Z,{icon:(0,n.jsx)(At.Z,{}),onClick:M,children:"Save"})]})})]})}),(0,n.jsx)(Q.Z.Content,{children:(0,n.jsxs)(de.oL,{vertical:!0,children:[(0,n.jsx)(Qt,{running:J,method:d,requestCache:D,onChange:ne,onPush:re}),(0,n.jsx)(Kt,{method:d,responseCache:U,onChange:fe})]})})]})},en=(0,ae.Pi)(_t),tn=function(){var r=(0,Z.useContext)(ee),e=r.tabStore,a=r.protoStore,s=function(c,j){typeof c=="string"&&(e.remove(c),a.removeCache(c))},o=(0,n.jsxs)(ie.Z,{size:0,style:{marginRight:10},children:[(0,n.jsx)(te.Z,{defaultValue:"1",style:{width:180},bordered:!1,children:(0,n.jsx)(te.Z.Option,{value:"1",children:"No Environment"})}),(0,n.jsx)(V.Z,{type:"text",icon:(0,n.jsx)(Pt.Z,{}),size:"large"})]});if(e.openTabs.length==0)return(0,n.jsx)(Nt,{});var u=e.openTabs.map(function(h){var c=(0,n.jsx)(n.Fragment,{}),j=h.title;if(h.type==ye.Proto){var I=h.params.split("-").map(Number),S=a.protos[I[1]],C=S.methods[I[3]];j=C.name,c=(0,n.jsx)(en,{proto:S,method:C})}return{label:(0,n.jsx)(Ut.Z,{dot:h.dot,offset:[5,8],children:j}),key:h.key,closeable:h.closable,children:c}});return(0,n.jsx)(pe.Z,{hideAdd:!0,type:"editable-card",onEdit:s,style:{height:"100%"},size:"small",items:u,onTabClick:function(c){return e.selectTab(c)},activeKey:e.selectedTab})},nn=(0,ae.Pi)(tn);function rn(){return(0,n.jsx)(ee.Provider,{value:{includeDirStore:Me,tabStore:Ne,protoStore:Re},children:(0,n.jsx)(Ke.ZP,{children:(0,n.jsxs)(de.oL,{defaultSizes:[75,220],children:[(0,n.jsx)(de.oL.Pane,{minSize:320,maxSize:600,children:(0,n.jsx)(Lt,{})}),(0,n.jsx)(nn,{})]})})})}}}]);
