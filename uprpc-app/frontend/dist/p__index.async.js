"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[866],{84849:function(Sn,ke,a){a.r(ke),a.d(ke,{default:function(){return cn}});var Qe=a(42805),Xe=a(15009),f=a.n(Xe),qe=a(99289),Q=a.n(qe),_e=a(97857),p=a.n(_e),et=a(64599),R=a.n(et),tt=a(5574),M=a.n(tt),I=a(67294),ae=a(71217),xe=a(13448),Pe=a(16536),Me=a(67040),le=a(26713),ge=a(34895),we=a(62986),nt=a(37877),X=a(97183),Ce=a(71230),q=a(15746),K=a(84908),pe=a(80284),rt=a(26911),it=a(69015),st=a(13520),Ee=a(18429),ot=a(238),at=a(80882),Oe=a(64789),lt=a(33160),ut=a(48689),dt=a(32319),ct=a(26024),ht=a(12444),_=a.n(ht),ft=a(72004),ee=a.n(ft),vt=a(9783),m=a.n(vt),je=a(68949),Ie="includeDirs",Be="protos";function mt(e,n,t){var s=R()(e.methods),i;try{for(s.s();!(i=s.n()).done;){var o=i.value;if(n==o.serviceName&&o.name==t)return o}}catch(u){s.e(u)}finally{s.f()}return null}function We(e){for(var n=ue(),t=0,s=n;t<s.length;t++){var i=s[t];if(i.path==e)return i}return null}function ue(){var e=localStorage.getItem(Be);return e==null?[]:JSON.parse(e)}function gt(e){var n=R()(e),t;try{for(n.s();!(t=n.n()).done;){var s=t.value;Ze(s)}}catch(i){n.e(i)}finally{n.f()}}function Ze(e){for(var n=ue(),t=0;t<n.length;t++)if(n[t].path===e.path){n.splice(t,1);break}n.push(e),localStorage.setItem(Be,JSON.stringify(n))}function pt(e){var n=R()(e),t;try{for(n.s();!(t=n.n()).done;){var s=t.value;St(s)}}catch(i){n.e(i)}finally{n.f()}}function St(e){var n=We(e.path);if(n!=null){var t=p()(p()({},e),{},{host:n.host}),s=R()(t.methods),i;try{for(s.s();!(i=s.n()).done;){var o=i.value,u=mt(n,o.serviceName,o.name);if(u!=null){o.id=u.id,o.requestMds=u.requestMds,o.responseMds=u.responseMds;var h=o.requestBody?JSON.parse(o.requestBody):{},c=u.requestBody?JSON.parse(u.requestBody):{};for(var C in h)c[C]!=null&&(h[C]=c[C]);o.requestBody=JSON.stringify(h,null,"	")}}}catch(E){s.e(E)}finally{s.f()}Ze(t)}}function yt(e){for(var n=ue(),t=0;t<n.length;t++)if(n[t].path===e){n.splice(t,1);break}localStorage.setItem(Be,JSON.stringify(n))}function xt(e){var n=We(e);return n==null?[]:n.methods}function J(){var e=localStorage.getItem(Ie);return e==null?[]:JSON.parse(e)}function wt(e){for(var n=J(),t=0;t<n.length;t++)if(n[t]===e){n.splice(t,1);break}n.push(e),localStorage.setItem(Ie,JSON.stringify(n))}function Ct(e){for(var n=J(),t=0;t<n.length;t++)if(n[t]===e){n.splice(t,1);break}localStorage.setItem(Ie,JSON.stringify(n))}var Et=function(){function e(){_()(this,e),m()(this,"includeDirDrawerVisible",!1),m()(this,"includeDirs",[]),console.log("init paths store"),(0,je.ky)(this),this.init()}return ee()(e,[{key:"init",value:f()().mark(function n(){return f()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:this.includeDirs=J();case 1:case"end":return s.stop()}},n,this)})},{key:"showIncludeDir",value:function(t){this.includeDirDrawerVisible=t}},{key:"addIncludeDir",value:f()().mark(function n(){var t;return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,window.rpc.openIncludeDir();case 2:t=i.sent,t.success&&(wt(t.data),this.includeDirs=J());case 4:case"end":return i.stop()}},n,this)})},{key:"removeIncludeDir",value:f()().mark(function n(t){return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:Ct(t);case 1:case"end":return i.stop()}},n)})}]),e}(),jt=function(){function e(){_()(this,e),m()(this,"selectedTab","1"),m()(this,"openTabs",[]),console.log("init tab store"),(0,je.ky)(this)}return ee()(e,[{key:"selectTab",value:function(t){this.selectedTab=t}},{key:"setDot",value:function(t){var s=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.openTabs.forEach(function(o,u){o.key==t&&(o.dot=i,s.openTabs.splice(u,1,o))})}},{key:"openTab",value:function(t){this.openTabs.length==1&&this.openTabs[0].key==="1"&&this.openTabs.splice(0,1);var s=this.openTabs.findIndex(function(i){return i.key===t.key});s==-1&&this.openTabs.push(t),this.selectedTab=t.key}},{key:"remove",value:function(t){var s=this;this.openTabs.forEach(function(i,o){if(i.key==t){if(s.openTabs.splice(o,1),s.openTabs.length==0)return;var u=o<s.openTabs.length?o:s.openTabs.length-1;s.selectedTab=s.openTabs[u].key}})}}]),e}(),te,l;(function(e){e[e.Text=0]="Text",e[e.Int8=1]="Int8",e[e.Int16LE=2]="Int16LE",e[e.Int16BE=3]="Int16BE",e[e.Int32LE=4]="Int32LE",e[e.Int32BE=5]="Int32BE",e[e.FloatLE=6]="FloatLE",e[e.FloatBE=7]="FloatBE",e[e.DoubleLE=8]="DoubleLE",e[e.DoubleBE=9]="DoubleBE",e[e.Uint8=10]="Uint8",e[e.Uint16LE=11]="Uint16LE",e[e.Uint16BE=12]="Uint16BE",e[e.Uint32LE=13]="Uint32LE",e[e.Uint32BE=14]="Uint32BE",e[e.BigInt64BE=15]="BigInt64BE",e[e.BigInt64LE=16]="BigInt64LE",e[e.BigUint64BE=17]="BigUint64BE",e[e.BigUint64LE=18]="BigUint64LE"})(l||(l={}));var Fe=new Map([[l.Text,"Text"],[l.Int8,"Int8"],[l.Int16LE,"Int16LE"],[l.Int16BE,"Int16BE"],[l.Int32LE,"Int32LE"],[l.Int32BE,"Int32BE"],[l.FloatLE,"FloatLE"],[l.FloatBE,"FloatBE"],[l.DoubleLE,"DoubleLE"],[l.DoubleBE,"DoubleBE"],[l.Uint8,"UInt8"],[l.Uint16LE,"Uint16LE"],[l.Uint16BE,"Uint16BE"],[l.Uint32LE,"Uint32LE"],[l.Uint32BE,"Uint32BE"],[l.BigInt64BE,"BigInt64BE"],[l.BigInt64LE,"BigInt64LE"],[l.BigUint64BE,"BigUint64BE"],[l.BigUint64LE,"BigUint64LE"]]),O;(function(e){e[e.Unary=0]="Unary",e[e.ClientStream=1]="ClientStream",e[e.ServerStream=2]="ServerStream",e[e.BidirectionalStream=3]="BidirectionalStream"})(O||(O={}));var It=(te={},m()(te,O.Unary,"Unary Call"),m()(te,O.ClientStream,"Client Stream"),m()(te,O.ServerStream,"Server Stream"),m()(te,O.BidirectionalStream,"Bi-Directional"),te),Se;(function(e){e[e.Proto=0]="Proto",e[e.Env=1]="Env"})(Se||(Se={}));function Bt(){return window.go.main.Api.OpenProto()}function Ne(e,n){return window.go.main.Api.ParseProto(e,n)}function Zt(e){return window.go.main.Api.Send(e)}function Dt(e){return window.go.main.Api.Stop(e)}var bt=a(52677),Lt=a.n(bt),Re;(function(e){var n=function(){function t(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_()(this,t),m()(this,"success",void 0),m()(this,"message",void 0),m()(this,"data",void 0),typeof s=="string"&&(s=JSON.parse(s)),this.success=s.success,this.message=s.message,this.data=s.data}return ee()(t,null,[{key:"createFrom",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new t(i)}}]),t}();e.R=n})(Re||(Re={}));var De;(function(e){var n=function(){function s(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_()(this,s),m()(this,"id",void 0),m()(this,"key",void 0),m()(this,"value",void 0),m()(this,"parseType",void 0),typeof i=="string"&&(i=JSON.parse(i)),this.id=i.id,this.key=i.key,this.value=i.value,this.parseType=i.parseType}return ee()(s,null,[{key:"createFrom",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new s(o)}}]),s}();e.Metadata=n;var t=function(){function s(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_()(this,s),m()(this,"id",void 0),m()(this,"protoPath",void 0),m()(this,"serviceName",void 0),m()(this,"serviceFullyName",void 0),m()(this,"methodName",void 0),m()(this,"methodMode",void 0),m()(this,"host",void 0),m()(this,"body",void 0),m()(this,"mds",void 0),m()(this,"includeDirs",void 0),typeof i=="string"&&(i=JSON.parse(i)),this.id=i.id,this.protoPath=i.protoPath,this.serviceName=i.serviceName,this.serviceFullyName=i.serviceFullyName,this.methodName=i.methodName,this.methodMode=i.methodMode,this.host=i.host,this.body=i.body,this.mds=this.convertValues(i.mds,n),this.includeDirs=i.includeDirs}return ee()(s,[{key:"convertValues",value:function(o,u){var h=this,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!o)return o;if(o.slice)return o.map(function(x){return h.convertValues(x,u)});if(Lt()(o)==="object"){if(c){for(var C=0,E=Object.keys(o);C<E.length;C++){var S=E[C];o[S]=new u(o[S])}return o}return new u(o)}return o}}],[{key:"createFrom",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new s(o)}}]),s}();e.RequestData=t})(De||(De={}));function yn(e){window.runtime.LogPrint(e)}function xn(e){window.runtime.LogTrace(e)}function wn(e){window.runtime.LogDebug(e)}function Cn(e){window.runtime.LogInfo(e)}function En(e){window.runtime.LogWarning(e)}function jn(e){window.runtime.LogError(e)}function In(e){window.runtime.LogFatal(e)}function ze(e,n,t){window.runtime.EventsOnMultiple(e,n,t)}function be(e,n){ze(e,n,-1)}function Bn(e){for(var n,t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];return(n=window.runtime).EventsOff.apply(n,[e].concat(s))}function Zn(e,n){ze(e,n,1)}function Dn(e){var n=[e].slice.call(arguments);return window.runtime.EventsEmit.apply(null,n)}function bn(){window.runtime.WindowReload()}function Ln(){window.runtime.WindowReloadApp()}function Un(){window.runtime.WindowSetSystemDefaultTheme()}function kn(){window.runtime.WindowSetLightTheme()}function Pn(){window.runtime.WindowSetDarkTheme()}function Mn(){window.runtime.WindowCenter()}function On(e){window.runtime.WindowSetTitle(e)}function Wn(){window.runtime.WindowFullscreen()}function Fn(){window.runtime.WindowUnfullscreen()}function Nn(){return window.runtime.WindowIsFullscreen()}function Rn(){return window.runtime.WindowGetSize()}function zn(e,n){window.runtime.WindowSetSize(e,n)}function Tn(e,n){window.runtime.WindowSetMaxSize(e,n)}function An(e,n){window.runtime.WindowSetMinSize(e,n)}function Vn(e,n){window.runtime.WindowSetPosition(e,n)}function Hn(){return window.runtime.WindowGetPosition()}function $n(){window.runtime.WindowHide()}function Gn(){window.runtime.WindowShow()}function Kn(){window.runtime.WindowMaximise()}function Jn(){window.runtime.WindowToggleMaximise()}function Yn(){window.runtime.WindowUnmaximise()}function Qn(){return window.runtime.WindowIsMaximised()}function Xn(){window.runtime.WindowMinimise()}function qn(){window.runtime.WindowUnminimise()}function _n(e,n,t,s){window.runtime.WindowSetBackgroundColour(e,n,t,s)}function er(){return window.runtime.ScreenGetAll()}function tr(){return window.runtime.WindowIsMinimised()}function nr(){return window.runtime.WindowIsNormal()}function rr(e){window.runtime.BrowserOpenURL(e)}function ir(){return window.runtime.Environment()}function sr(){window.runtime.Quit()}function or(){window.runtime.Hide()}function ar(){window.runtime.Show()}var Ut=function(){function e(){_()(this,e),m()(this,"protos",[]),m()(this,"requestCaches",new Map),m()(this,"responseCaches",new Map),m()(this,"runningCaches",new Map),console.log("init rpc store"),(0,je.ky)(this),this.init()}return ee()(e,[{key:"init",value:function(){this.initProto(),this.onEndStream(),this.onResponse()}},{key:"initProto",value:function(){this.protos=ue()}},{key:"onEndStream",value:function(){var t=this;be("end",function(s){console.log("end data: ",s),t.runningCaches.set(s,!1)})}},{key:"onResponse",value:function(){var t=this;be("data",function(s){console.log("Response data: ",s);var i=t.responseCaches.get(s.id);if(i==null){t.responseCaches.set(s.id,{body:s.body,mds:s.mds,streams:[s.body]});return}var o=i.streams;o!=null&&(o.unshift(s.body),t.responseCaches.set(s.id,p()(p()({},i),{},{streams:o,mds:s.mds})))})}},{key:"importProto",value:f()().mark(function n(){var t;return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Bt();case 2:t=i.sent;debugger;if(t.success){i.next=6;break}return i.abrupt("return",t);case 6:return i.next=8,Ne(t.data,J());case 8:return t=i.sent,gt(t.data),this.initProto(),i.abrupt("return",{success:!0});case 12:case"end":return i.stop()}},n,this)})},{key:"reloadProto",value:f()().mark(function n(){var t,s;return f()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=[],ue().forEach(function(u){return t.push(u.path)}),o.next=4,Ne(t,J());case 4:if(s=o.sent,s.success){o.next=8;break}return console.log("reload proto error"),o.abrupt("return");case 8:pt(s.data),this.initProto();case 10:case"end":return o.stop()}},n,this)})},{key:"deleteProto",value:f()().mark(function n(t){return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:yt(t),this.initProto();case 2:case"end":return i.stop()}},n,this)})},{key:"saveProto",value:f()().mark(function n(t,s,i){var o,u;return f()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:for(console.log("save proto method",i),t.host=s,o=0;o<t.methods.length;o++)u=t.methods[o],u.id==i.id&&(t.methods[o]=i);Ze(t),this.initProto();case 5:case"end":return c.stop()}},n,this)})},{key:"send",value:f()().mark(function n(t){return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return this.removeCache(t.id),t.methodMode!=O.Unary&&this.runningCaches.set(t.id,!0),i.next=4,this.push(t);case 4:case"end":return i.stop()}},n,this)})},{key:"push",value:f()().mark(function n(t){var s,i;return f()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return console.log("send request data",t),s=this.requestCaches.get(t.id),s==null?this.requestCaches.set(t.id,{streams:[t.body]}):(i=s.streams,i==null||i.unshift(t.body),this.requestCaches.set(t.id,{streams:i})),t.includeDirs=J(),u.next=6,Zt(new De.RequestData(t));case 6:case"end":return u.stop()}},n,this)})},{key:"removeCache",value:f()().mark(function n(t){return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:this.requestCaches.delete(t),this.responseCaches.delete(t),this.runningCaches.delete(t);case 3:case"end":return i.stop()}},n,this)})},{key:"stopStream",value:f()().mark(function n(t){return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("request stop stream"),i.next=3,Dt(t);case 3:this.runningCaches.set(t,!1);case 4:case"end":return i.stop()}},n,this)})}]),e}(),Te=new Et,Ae=new jt,Ve=new Ut,ne=(0,I.createContext)({includeDirStore:Te,tabStore:Ae,protoStore:Ve}),kt=a(63463),z=a(71577),He=a(95507),lr=a(70133),$e=a(24969),Pt=a(97937),r=a(85893),Mt=function(){var n=(0,I.useContext)(ne),t=n.includeDirStore;return(0,r.jsx)(kt.Z,{title:"Import Paths",placement:"left",width:500,open:t.includeDirDrawerVisible,onClose:function(){return t.showIncludeDir(!1)},style:{padding:5},bodyStyle:{padding:5},extra:(0,r.jsx)(z.Z,{type:"link",icon:(0,r.jsx)($e.Z,{}),onClick:function(){return t.addIncludeDir()},children:"Add Path"}),children:(0,r.jsx)(He.ZP,{size:"large",loadMore:(0,r.jsx)("div",{}),dataSource:t.includeDirs,renderItem:function(i){return(0,r.jsx)(He.ZP.Item,{actions:[(0,r.jsx)("a",{onClick:function(){return t.removeIncludeDir(i)},children:(0,r.jsx)(Pt.Z,{})})],children:i})}})})},Ot=(0,ae.Pi)(Mt),Wt=function(){var n=(0,I.useContext)(ne),t=n.tabStore,s=n.protoStore,i=n.includeDirStore,o=(0,I.useState)(!1),u=M()(o,2),h=u[0],c=u[1],C=(0,I.useState)([]),E=M()(C,2),S=E[0],x=E[1],d=(0,I.useState)(""),B=M()(d,2),b=B[0],ie=B[1],fe=(0,I.useState)(!0),G=M()(fe,2),se=G[0],Y=G[1],ve=(0,I.useState)(),W=M()(ve,2),Z=W[0],k=W[1],A=function(y){c(y),y||ie("")},L=function(y){x(y),Y(!1)},v=function(y){var j=new Set,g=R()(s.protos),D;try{for(g.s();!(D=g.n()).done;){var T=D.value;T.name.toLowerCase().indexOf(y.toLowerCase())>-1&&j.add(T.path);var U=R()(T.methods),F;try{for(U.s();!(F=U.n()).done;){var H=F.value;H.serviceName.toLowerCase().indexOf(y.toLowerCase())>-1&&j.add(T.path+H.serviceName),H.name.toLowerCase().indexOf(y.toLowerCase())>-1&&j.add(H.id)}}catch(N){U.e(N)}finally{U.f()}}}catch(N){g.e(N)}finally{g.f()}return Array.from(j)},V=function(y){var j=y.target.value,g=v(j);console.log(j,g),x(g),ie(j),Y(!0)},w=function(y,j){var g=y.toLowerCase().indexOf(b.toLowerCase()),D=y.substring(0,g),T=y.substring(g,g+b.length),U=y.slice(g+b.length),F=g>-1?(0,r.jsxs)("span",{children:[D,(0,r.jsx)("span",{style:{color:"#f50"},children:T}),U]}):(0,r.jsx)("span",{children:y});return F},hn=function(y){var j=[],g=R()(y),D;try{var T=function(){var F=D.value,H={id:F.path,title:(0,r.jsx)("span",{style:{width:"100%"},children:w(F.name,b)}),icon:(0,r.jsx)(rt.Z,{}),children:[]},N=new Map;F.methods.forEach(function($,oe,me){var ye=N.get($.serviceName);ye==null&&(ye=[]),ye.push(p()(p()({},$),{},{title:w($.name,b),icon:(0,r.jsx)(it.Z,{})})),N.set($.serviceName,ye)}),N.forEach(function($,oe,me){H.children.push({id:F.path+oe,title:w(oe,b),icon:(0,r.jsx)(st.Z,{}),children:$})}),j.push(H)};for(g.s();!(D=g.n()).done;)T()}catch(U){g.e(U)}finally{g.f()}return j},fn=function(y,j){k(void 0);var g=j.node.pos.split("-");if(g.length==2){var D=s.protos[g[1]];k({id:D.path,name:D.name})}else g.length==4&&t.openTab({key:y[0].toString(),params:j.node.pos,type:Se.Proto})},vn=function(){var P=Q()(f()().mark(function y(){var j;return f()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,s.importProto();case 2:j=D.sent,j.success||xe.Z.open({message:"Error while importing protos",description:j.message,icon:(0,r.jsx)(Ee.Z,{style:{color:"red"}})});case 4:case"end":return D.stop()}},y)}));return function(){return P.apply(this,arguments)}}(),mn=function(){s.reloadProto(),Pe.ZP.success("Reload protos successful.")},gn=function(){var P=Q()(f()().mark(function y(){return f()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(Z!=null){g.next=3;break}return Pe.ZP.warn("Please select the deleted proto."),g.abrupt("return");case 3:Me.Z.confirm({title:"Confirm delete proto",content:"Do you want to remove the proto configuration ".concat(Z.name,"?"),onOk:function(){var T=xt(Z.id),U=R()(T),F;try{for(U.s();!(F=U.n()).done;){var H=F.value,N=R()(t.openTabs),$;try{for(N.s();!($=N.n()).done;){var oe=$.value;if(oe.key==H.id){t.remove(oe.key);break}}}catch(me){N.e(me)}finally{N.f()}}}catch(me){U.e(me)}finally{U.f()}s.deleteProto(Z.id),k(void 0)}});case 4:case"end":return g.stop()}},y)}));return function(){return P.apply(this,arguments)}}(),Ye=hn(s.protos),pn=[{label:(0,r.jsxs)(le.Z,{direction:"vertical",size:0,align:"center",children:[(0,r.jsx)(ot.Z,{style:{fontSize:20,marginRight:0}}),(0,r.jsx)("div",{style:{fontSize:10},children:"GRPC"})]}),key:"1",children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ge.Z,{size:"small",placeholder:"Filter Methods",hidden:!h,onChange:V,value:b,style:{marginBottom:5}}),Ye.length==0?(0,r.jsx)("div",{style:{height:"90%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(we.Z,{description:"No proto"})}):(0,r.jsx)(nt.Z.DirectoryTree,{onExpand:L,fieldNames:{key:"id",title:"title",children:"children"},expandedKeys:S,autoExpandParent:se,onSelect:fn,switcherIcon:(0,r.jsx)(at.Z,{}),defaultExpandedKeys:["0-0-0"],treeData:Ye})]})}];return(0,r.jsxs)(X.Z,{style:{height:"100%"},children:[(0,r.jsx)(X.Z.Header,{style:{padding:0,backgroundColor:"white",height:"44px",lineHeight:"44px",borderBottom:"1px solid #f0f0f0"},children:(0,r.jsxs)(Ce.Z,{children:[(0,r.jsx)(q.Z,{flex:"auto",style:{paddingLeft:10,fontSize:18},children:"upRpc"}),(0,r.jsx)(q.Z,{flex:"100px",children:(0,r.jsxs)(le.Z,{size:8,style:{paddingRight:10},children:[(0,r.jsx)(K.Z,{title:"Import protos",children:(0,r.jsx)("a",{style:{color:"#000000D9",fontSize:16},onClick:vn,children:(0,r.jsx)(Oe.Z,{})})}),(0,r.jsx)(K.Z,{title:"Reload protos",children:(0,r.jsx)("a",{style:{color:"#000000D9",fontSize:16},onClick:mn,children:(0,r.jsx)(lt.Z,{})})}),(0,r.jsx)(K.Z,{title:"Delete selectecd proto",children:(0,r.jsx)("a",{style:{color:"#000000D9",fontSize:16},onClick:gn,children:(0,r.jsx)(ut.Z,{})})}),(0,r.jsx)(K.Z,{title:"Import dependency paths",children:(0,r.jsx)("a",{style:{color:"#000000D9",fontSize:16},onClick:function(){return i.showIncludeDir(!i.includeDirDrawerVisible)},children:(0,r.jsx)(dt.Z,{})})}),(0,r.jsx)(K.Z,{title:"Filter methods",children:(0,r.jsx)("a",{style:{color:"#000000D9",fontSize:16},onClick:function(){return A(!h)},children:(0,r.jsx)(ct.Z,{})})})]})})]})}),(0,r.jsxs)(X.Z.Content,{style:{backgroundColor:"white"},children:[(0,r.jsx)(pe.Z,{tabPosition:"left",size:"small",style:{height:"100%"},items:pn}),(0,r.jsx)(Ot,{})]})]})},Ft=(0,ae.Pi)(Wt),de=a(70524),re=a(21369),Nt=a(63922),Rt=a(99611),zt=a(93045),Tt=a(33859),At=function(){var n=(0,I.useContext)(ne),t=n.protoStore,s=function(){var i=Q()(f()().mark(function o(){var u;return f()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,t.importProto();case 2:u=c.sent,u.success||xe.Z.open({message:"Error while importing protos",description:u.message,icon:(0,r.jsx)(Ee.Z,{style:{color:"red"}})});case 4:case"end":return c.stop()}},o)}));return function(){return i.apply(this,arguments)}}();return(0,r.jsx)("div",{style:{height:"90%",width:"90%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(Tt.ZP,{icon:(0,r.jsx)(zt.Z,{style:{fontSize:120}}),title:"Welcome to use upRpc",subTitle:"Swim in the ocean of knowledge and enjoy it.",extra:(0,r.jsx)(z.Z,{type:"primary",onClick:function(){return s()},icon:(0,r.jsx)($e.Z,{}),children:"Import Protos"})})})},Vt=(0,ae.Pi)(At),ce={header:"header___tHXcr",requestStreamHeight:"requestStreamHeight___LV6s3",metadataColumn:"metadataColumn___o3Lum"},Ht=a(36027),$t=a(28280),Gt=a(27496),Kt=a(74842),Jt=a(60219),he=a(1769),Ge=a(74981),ur=a(90252),dr=a(82679),Ke=a(54907),Je=function(e){var n=e.value,t=(0,I.useState)("1"),s=M()(t,2),i=s[0],o=s[1];return n==null?(0,r.jsx)(we.Z,{image:we.Z.PRESENTED_IMAGE_SIMPLE}):(0,r.jsx)(Ke.Z,{activeKey:i,accordion:!0,onChange:function(h){return o(h)},children:n==null?void 0:n.map(function(u,h){return u==null||u==""?!0:(0,r.jsx)(Ke.Z.Panel,{header:"stream-"+((n==null?void 0:n.length)-h),children:(0,r.jsx)("pre",{style:{padding:0},children:u})},h+1)})})},Le=a(52300);function Yt(e,n){if(l.Text==n)return Le.DS.encode(e);var t=new DataView(new ArrayBuffer(16));switch(n){case l.Int8:t.setInt8(0,e);break;case l.Int16LE:t.setInt16(0,e,!0);break;case l.Int16BE:t.setInt16(0,e,!1);break;case l.Int32LE:t.setInt32(0,e,!0);break;case l.Int32BE:t.setInt32(0,e,!1);break;case l.FloatLE:t.setFloat32(0,e,!0);break;case l.FloatBE:t.setFloat32(0,e,!1);break;case l.DoubleLE:t.setFloat64(0,e,!0);break;case l.DoubleBE:t.setFloat64(0,e,!1);break;case l.Uint8:t.setUint8(0,e);break;case l.Uint16LE:t.setUint16(0,e,!0);break;case l.Uint16BE:t.setUint16(0,e,!1);break;case l.Uint32LE:t.setUint32(0,e,!0);break;case l.Uint32BE:t.setUint32(0,e,!1);break;case l.BigInt64LE:t.setBigInt64(0,e,!0);break;case l.BigInt64BE:t.setBigInt64(0,e,!1);break;case l.BigUint64LE:t.setBigUint64(0,e,!0);break;case l.BigUint64BE:t.setBigInt64(0,e,!1);break}return Le.DS.encode(e)}function Qt(e,n){try{if(e=Le.DS.toUint8Array(e),l.Text==n){var t=new TextDecoder().decode(e);return t}var s=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(n){case l.Int8:return s.getInt8(0).toString();case l.Int16LE:return s.getInt16(0,!0).toString();case l.Int16BE:return s.getInt16(0,!1).toString();case l.Int32LE:return s.getInt32(0,!0).toString();case l.Int32BE:return s.getInt32(0,!1).toString();case l.FloatLE:return s.getFloat32(0,!0).toString();case l.FloatBE:return s.getFloat32(0,!1).toString();case l.DoubleLE:return s.getFloat64(0,!0).toString();case l.DoubleBE:return s.getFloat64(0,!1).toString();case l.Uint8:return s.getUint8(0).toString();case l.Uint16LE:return s.getUint16(0,!0).toString();case l.Uint16BE:return s.getUint16(0,!1).toString();case l.Uint32LE:return s.getUint32(0,!0).toString();case l.Uint32BE:return s.getUint32(0,!1).toString();case l.BigInt64LE:return s.getBigInt64(0,!0).toString().toString();case l.BigInt64BE:return s.getBigInt64(0,!1).toString();case l.BigUint64LE:return s.getBigUint64(0,!0).toString();case l.BigUint64BE:return s.getBigInt64(0,!1).toString();default:return"[Buffer ... "+e.length+" bytes]"}}catch{return"decode error"}}var Xt=function(e){var n=e.method,t=e.responseCache,s=e.onChange,i=function(S,x,d){if(console.log(" response mds: ",n.responseMds),n.responseMds==null)n.responseMds=[];else for(var B=0;B<n.responseMds.length;B++)n.responseMds[B].id==S&&n.responseMds.splice(B,1);n.responseMds.push({id:S,key:x,parseType:d}),s(p()({},n))},o=function(S){if(n.responseMds==null)return 0;var x=R()(n.responseMds),d;try{for(x.s();!(d=x.n()).done;){var B=d.value;if(B.id==S)return B.parseType}}catch(b){x.e(b)}finally{x.f()}return 0},u=[{title:"KEY",dataIndex:"key",key:"name",width:"200px"},{title:"VALUE",dataIndex:"value",key:"value",render:function(S,x){return(0,r.jsx)(qt,{id:x.id,value:x.value,parseType:o(x.id),onChange:function(B,b){return i(B,x.key,b)}})}}],h=(0,r.jsx)(r.Fragment,{});(t==null?void 0:t.mds)!=null&&(h=(0,r.jsxs)(r.Fragment,{children:[" (",t.mds.length,")"]}));var c=n.mode==O.ServerStream||n.mode==O.BidirectionalStream?{key:"response",label:"Response Stream",children:(0,r.jsx)(Je,{value:t==null?void 0:t.streams})}:{key:" response",label:"Response",children:(0,r.jsx)(Ge.ZP,{style:{background:"#fff"},width:"100%",height:"100%",mode:"json",theme:"textmate",name:"inputs",fontSize:13,cursorStart:2,highlightActiveLine:!1,showPrintMargin:!1,showGutter:!1,value:t==null?void 0:t.body,setOptions:{showLineNumbers:!1,highlightGutterLine:!1,fixedWidthGutter:!1,tabSize:1,displayIndentGuides:!1},readOnly:!0,tabSize:2})};console.log("responseCache: ",t);var C=[c,{label:(0,r.jsxs)(r.Fragment,{children:["Metadata",h]}),key:"matadata",children:(0,r.jsx)(he.Z,{size:"small",bordered:!0,pagination:!1,columns:u,rowKey:"id",dataSource:t==null?void 0:t.mds})}];return(0,r.jsx)(pe.Z,{style:{height:"100%"},animated:!1,items:C})},qt=function(n){var t=n.id,s=n.value,i=n.parseType,o=n.onChange,u=[];return Fe.forEach(function(h,c){return u.push((0,r.jsx)(re.Z.Option,{value:c.toString(),children:h},c))}),(0,r.jsxs)(Ce.Z,{children:[(0,r.jsx)(q.Z,{flex:"auto",style:{display:"flex",alignItems:"center"},children:Qt(s,i)}),(0,r.jsx)(q.Z,{flex:"100px",children:(0,r.jsx)(re.Z,{defaultValue:i.toString(),bordered:!1,onChange:function(c){return o(t,Number.parseInt(c))},style:{width:140},children:u},"s1"+t)})]})},_t=a(19632),Ue=a.n(_t),en=a(81474),tn=a(16596),nn=a(3089),rn=function(e){var n=e.running,t=e.method,s=e.requestCache,i=e.onChange,o=e.onPush,u=(0,I.useState)(t.requestBody),h=M()(u,2),c=h[0],C=h[1],E=function(Z){i&&i(p()(p()({},t),{},{requestBody:Z})),C(Z)},S=(0,I.useState)(t.requestMds==null?[]:t.requestMds),x=M()(S,2),d=x[0],B=x[1],b=function(Z){d[Z.id]=Z,B(Ue()(d)),i&&i(p()(p()({},t),{},{requestMds:d}))},ie=function(){d.push({parseType:0,id:d.length,key:"",value:""}),B(Ue()(d))},fe=function(Z){d.splice(Z,1),B(Ue()(d)),i&&i(p()(p()({},t),{},{requestMds:d}))},G=(0,r.jsx)(r.Fragment,{});d!==null&&d.length>0&&(G=(0,r.jsxs)(r.Fragment,{children:[" (",d.length,")"]}));var se=t.mode==O.ClientStream||t.mode==O.BidirectionalStream,Y=n&&se?(0,r.jsx)(z.Z,{size:"small",type:"primary",icon:(0,r.jsx)(tn.Z,{}),onClick:function(){return o(c)},children:"Push"}):"",ve=[{label:"Params",key:"params",children:(0,r.jsx)(Ge.ZP,{style:{background:"#fff"},width:"100%",height:"100%",mode:"json",theme:"textmate",name:"inputs",fontSize:13,cursorStart:2,showPrintMargin:!1,showGutter:!0,onChange:E,defaultValue:t.requestBody,setOptions:{useWorker:!0,displayIndentGuides:!0},tabSize:2})},{label:(0,r.jsxs)(r.Fragment,{children:["Metadata",G]}),key:"metadata",children:(0,r.jsxs)(he.Z,{rowKey:"id",size:"small",bordered:!0,pagination:!1,dataSource:d,children:[(0,r.jsx)(he.Z.Column,{className:ce.metadataColumn,dataIndex:"key",title:"KEY",width:"30%",render:function(Z,k,A){return(0,r.jsx)(ge.Z,{defaultValue:k.key,onChange:function(v){return b(p()(p()({},k),{},{key:v.target.value}))}},"key"+k.id)}},"key"),(0,r.jsx)(he.Z.Column,{className:ce.metadataColumn,dataIndex:"value",title:"VALUE",render:function(Z,k,A){return(0,r.jsx)(sn,{metadata:k,onChange:function(v){return b(p()(p()({},v),{},{key:k.key}))}})}},"value"),(0,r.jsx)(he.Z.Column,{className:ce.metadataColumn,dataIndex:"action",align:"center",width:80,title:(0,r.jsx)(K.Z,{title:"Add metadata",children:(0,r.jsx)(z.Z,{size:"small",type:"text",icon:(0,r.jsx)(Oe.Z,{}),onClick:ie})}),render:function(Z,k,A){return(0,r.jsx)(K.Z,{title:"Delete metadata",placement:"bottom",children:(0,r.jsx)(z.Z,{size:"small",type:"text",icon:(0,r.jsx)(nn.Z,{}),onClick:function(){return fe(A)}})})}},"action")]})}];return(0,r.jsxs)(de.oL,{children:[(0,r.jsx)(pe.Z,{style:{height:"100%"},animated:!1,items:ve,tabBarExtraContent:(0,r.jsx)("div",{style:{paddingRight:10},children:Y})}),(0,r.jsx)(de.oL.Pane,{visible:se,className:ce.requestStreamHeight,children:(0,r.jsx)(en.Z,{title:"Request Stream",size:"small",bordered:!1,style:{height:"100%",marginTop:"3px"},bodyStyle:{height:"calc(100% - 40px)",overflow:"auto",padding:0},children:(0,r.jsx)(Je,{value:s==null?void 0:s.streams})})})]})},sn=function(n){var t=n.metadata,s=n.onChange,i=(0,I.useState)(t),o=M()(i,2),u=o[0],h=o[1],c=function(S){h(S),s(S)},C=[];return Fe.forEach(function(E,S){return C.push((0,r.jsx)(re.Z.Option,{value:S.toString(),children:E},S))}),(0,r.jsxs)("div",{style:{display:"flex"},children:[(0,r.jsx)(ge.Z,{defaultValue:u.value,onChange:function(S){return c(p()(p()({},u),{},{value:S.target.value}))}},"v"+u.id),t.key.endsWith("-bin")?(0,r.jsx)(re.Z,{defaultValue:u.parseType.toString(),bordered:!1,onChange:function(S){return c(p()(p()({},u),{},{parseType:Number.parseInt(S)}))},style:{width:140},children:C},"s"+u.id):""]})},on=function(n){var t=n.proto,s=n.method,i=(0,I.useContext)(ne),o=i.protoStore,u=i.tabStore,h=(0,I.useState)(t.host),c=M()(h,2),C=c[0],E=c[1],S=(0,I.useState)(s),x=M()(S,2),d=x[0],B=x[1],b=function(v){u.setDot(d.id),E(v)},ie=function(v){u.setDot(v.id),B(p()(p()({},v),{},{requestBody:v.requestBody,requestMds:v.requestMds}))},fe=function(v){u.setDot(v.id),B(p()(p()({},v),{},{responseMds:v.responseMds}))},G=function(){var v=[];return d.requestMds!=null&&d.requestMds.length>0&&(v=d.requestMds.map(function(V,w){return p()(p()({},V),{},{key:V.key,value:Yt(V.value,V.parseType)})})),{id:d.id,body:d.requestBody,mds:v,methodMode:d.mode,methodName:d.name,serviceFullyName:d.serviceFullyName,serviceName:d.serviceName,protoPath:t.path,host:C}},se=function(){var L=Q()(f()().mark(function v(){return f()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,o.push(G());case 2:case"end":return w.stop()}},v)}));return function(){return L.apply(this,arguments)}}(),Y=function(){var L=Q()(f()().mark(function v(){return f()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.prev=0,w.next=3,o.send(G());case 3:w.next=8;break;case 5:w.prev=5,w.t0=w.catch(0),xe.Z.open({message:"Calling error",description:w.t0.message,icon:(0,r.jsx)(Ee.Z,{style:{color:"red"}})});case 8:case"end":return w.stop()}},v,null,[[0,5]])}));return function(){return L.apply(this,arguments)}}(),ve=function(){var L=Q()(f()().mark(function v(){return f()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,o.stopStream(d.id);case 2:case"end":return w.stop()}},v)}));return function(){return L.apply(this,arguments)}}(),W=function(){o.saveProto(t,C,d),u.setDot(d.id,!1)},Z=o.requestCaches.get(d.id),k=o.responseCaches.get(d.id),A=o.runningCaches.get(d.id);return console.log("running: ",A),(0,r.jsxs)(X.Z,{style:{height:"100%",backgroundColor:"white",padding:"0px 10px"},children:[(0,r.jsx)(X.Z.Header,{className:ce.header,style:{paddingBottom:10},children:(0,r.jsxs)(Ce.Z,{gutter:5,children:[(0,r.jsx)(q.Z,{flex:"auto",style:{paddingTop:5},children:(0,r.jsx)(ge.Z,{addonBefore:(0,r.jsxs)(le.Z,{style:{width:110},children:[(0,r.jsx)(Ht.Z,{}),It[d.mode]]}),defaultValue:C,onChange:function(v){return b(v.target.value)}})}),(0,r.jsx)(q.Z,{flex:"160px",children:(0,r.jsxs)(le.Z,{children:[A?(0,r.jsx)(z.Z,{type:"primary",icon:(0,r.jsx)($t.Z,{}),onClick:ve,children:"Stop"}):d.mode==O.Unary?(0,r.jsx)(z.Z,{type:"primary",icon:(0,r.jsx)(Gt.Z,{}),onClick:Y,children:"Send"}):(0,r.jsx)(z.Z,{type:"primary",icon:(0,r.jsx)(Kt.Z,{}),onClick:Y,children:"Start"}),(0,r.jsx)(z.Z,{icon:(0,r.jsx)(Jt.Z,{}),onClick:W,children:"Save"})]})})]})}),(0,r.jsx)(X.Z.Content,{children:(0,r.jsxs)(de.oL,{vertical:!0,children:[(0,r.jsx)(rn,{running:A,method:d,requestCache:Z,onChange:ie,onPush:se}),(0,r.jsx)(Xt,{method:d,responseCache:k,onChange:fe})]})})]})},an=(0,ae.Pi)(on),ln=function(){var n=(0,I.useContext)(ne),t=n.tabStore,s=n.protoStore,i=function(c,C){typeof c=="string"&&(t.remove(c),s.removeCache(c))},o=(0,r.jsxs)(le.Z,{size:0,style:{marginRight:10},children:[(0,r.jsx)(re.Z,{defaultValue:"1",style:{width:180},bordered:!1,children:(0,r.jsx)(re.Z.Option,{value:"1",children:"No Environment"})}),(0,r.jsx)(z.Z,{type:"text",icon:(0,r.jsx)(Rt.Z,{}),size:"large"})]});if(t.openTabs.length==0)return(0,r.jsx)(Vt,{});var u=t.openTabs.map(function(h){var c=(0,r.jsx)(r.Fragment,{}),C=h.title;if(h.type==Se.Proto){var E=h.params.split("-").map(Number),S=s.protos[E[1]],x=S.methods[E[3]];C=x.name,c=(0,r.jsx)(an,{proto:S,method:x})}return{label:(0,r.jsx)(Nt.Z,{dot:h.dot,offset:[5,8],children:C}),key:h.key,closeable:h.closable,children:c}});return(0,r.jsx)(pe.Z,{hideAdd:!0,type:"editable-card",onEdit:i,style:{height:"100%"},size:"small",items:u,onTabClick:function(c){return t.selectTab(c)},activeKey:t.selectedTab})},un=(0,ae.Pi)(ln),dn=function(){(0,I.useEffect)(function(){console.log("init about effect"),be("about",function(){console.log("about message: ",!0),s(!0)})},[]);var e=(0,I.useState)(!1),n=M()(e,2),t=n[0],s=n[1],i=function(){s(!1)};return(0,r.jsxs)(Me.Z,{title:"About UpRpc",open:t,onCancel:i,footer:null,children:[(0,r.jsx)("p",{children:"Icon"}),(0,r.jsx)("p",{children:"UpRpc"}),(0,r.jsx)("p",{children:"Version 1.0.0"}),(0,r.jsx)("p",{children:"Copyright (c) 2022 UpUpc. All rights reserved."})]})};function cn(){return(0,r.jsx)(ne.Provider,{value:{includeDirStore:Te,tabStore:Ae,protoStore:Ve},children:(0,r.jsxs)(Qe.ZP,{children:[(0,r.jsxs)(de.oL,{defaultSizes:[75,220],children:[(0,r.jsx)(de.oL.Pane,{minSize:320,maxSize:600,children:(0,r.jsx)(Ft,{})}),(0,r.jsx)(un,{})]}),(0,r.jsx)(dn,{})]})})}}}]);
