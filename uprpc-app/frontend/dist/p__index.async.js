"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[866],{84849:function(yn,Pe,a){a.r(Pe),a.d(Pe,{default:function(){return hn}});var qe=a(42805),_e=a(15009),f=a.n(_e),et=a(99289),q=a.n(et),tt=a(64599),R=a.n(tt),nt=a(5574),O=a.n(nt),j=a(67294),ue=a(71217),we=a(13448),Me=a(16536),Oe=a(67040),_=a(97183),xe=a(71230),ee=a(15746),me=a(26713),Y=a(84908),ge=a(34895),Ce=a(62986),rt=a(37877),it=a(26911),ot=a(69015),st=a(13520),Ee=a(18429),We=a(64789),at=a(33160),lt=a(48689),ut=a(32319),dt=a(26024),ct=a(80882),ht=a(12444),te=a.n(ht),ft=a(72004),ne=a.n(ft),vt=a(9783),g=a.n(vt),je=a(68949),mt=a(97857),S=a.n(mt),Ie="includeDirs",Be="protos";function gt(e,n,t){var o=R()(e.methods),i;try{for(o.s();!(i=o.n()).done;){var s=i.value;if(n==s.serviceName&&s.name==t)return s}}catch(u){o.e(u)}finally{o.f()}return null}function Ze(e){for(var n=de(),t=0,o=n;t<o.length;t++){var i=o[t];if(i.path==e)return i}return null}function de(){var e=localStorage.getItem(Be);return e==null?[]:JSON.parse(e)}function pt(e){var n=R()(e),t;try{for(n.s();!(t=n.n()).done;){var o=t.value;De(o)}}catch(i){n.e(i)}finally{n.f()}}function De(e){for(var n=de(),t=0;t<n.length;t++)if(n[t].path===e.path){n.splice(t,1);break}n.push(e),localStorage.setItem(Be,JSON.stringify(n))}function St(e){var n=R()(e),t;try{for(n.s();!(t=n.n()).done;){var o=t.value;yt(o)}}catch(i){n.e(i)}finally{n.f()}}function yt(e){var n=Ze(e.path);if(n!=null){var t=S()(S()({},e),{},{host:n.host}),o=R()(t.methods),i;try{for(o.s();!(i=o.n()).done;){var s=i.value,u=gt(n,s.serviceName,s.name);if(u!=null){s.id=u.id,s.requestMds=u.requestMds,s.responseMds=u.responseMds;var d=s.requestBody?JSON.parse(s.requestBody):{},h=u.requestBody?JSON.parse(u.requestBody):{};for(var v in d)h[v]!=null&&(d[v]=h[v]);s.requestBody=JSON.stringify(d,null,"	")}}}catch(I){o.e(I)}finally{o.f()}De(t)}}function wt(e){for(var n=de(),t=0;t<n.length;t++)if(n[t].path===e){n.splice(t,1);break}localStorage.setItem(Be,JSON.stringify(n))}function xt(e){var n=Ze(e);return n==null?[]:n.methods}function K(){var e=localStorage.getItem(Ie);return e==null?[]:JSON.parse(e)}function Ct(e){for(var n=K(),t=0;t<n.length;t++)if(n[t]===e){n.splice(t,1);break}n.push(e),localStorage.setItem(Ie,JSON.stringify(n))}function Et(e){for(var n=K(),t=0;t<n.length;t++)if(n[t]===e){n.splice(t,1);break}localStorage.setItem(Ie,JSON.stringify(n))}function jt(){return window.go.main.Api.OpenIncludeDir()}function It(){return window.go.main.Api.OpenProto()}function Fe(e,n){return window.go.main.Api.ParseProto(e,n)}function Bt(e){return window.go.main.Api.Push(e)}function Zt(e){return window.go.main.Api.Send(e)}function Dt(e){return window.go.main.Api.Stop(e)}var bt=function(){function e(){te()(this,e),g()(this,"includeDirDrawerVisible",!1),g()(this,"includeDirs",[]),console.log("init paths store"),(0,je.ky)(this),this.init()}return ne()(e,[{key:"init",value:f()().mark(function n(){return f()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:this.includeDirs=K();case 1:case"end":return o.stop()}},n,this)})},{key:"showIncludeDir",value:function(t){this.includeDirDrawerVisible=t}},{key:"addIncludeDir",value:f()().mark(function n(){var t;return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,jt();case 2:t=i.sent,t.success&&t.data!=""&&(Ct(t.data),this.includeDirs=K());case 4:case"end":return i.stop()}},n,this)})},{key:"removeIncludeDir",value:f()().mark(function n(t){return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:Et(t),this.includeDirs=K();case 2:case"end":return i.stop()}},n,this)})}]),e}(),Lt=function(){function e(){te()(this,e),g()(this,"selectedTab","1"),g()(this,"openTabs",[]),console.log("init tab store"),(0,je.ky)(this)}return ne()(e,[{key:"selectTab",value:function(t){this.selectedTab=t}},{key:"setDot",value:function(t){var o=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.openTabs.forEach(function(s,u){s.key==t&&(s.dot=i,o.openTabs.splice(u,1,s))})}},{key:"openTab",value:function(t){this.openTabs.length==1&&this.openTabs[0].key==="1"&&this.openTabs.splice(0,1);var o=this.openTabs.findIndex(function(i){return i.key===t.key});o==-1&&this.openTabs.push(t),this.selectedTab=t.key}},{key:"remove",value:function(t){var o=this;this.openTabs.forEach(function(i,s){if(i.key==t){if(o.openTabs.splice(s,1),o.openTabs.length==0)return;var u=s<o.openTabs.length?s:o.openTabs.length-1;o.selectedTab=o.openTabs[u].key}})}}]),e}(),re,l;(function(e){e[e.Text=0]="Text",e[e.Int8=1]="Int8",e[e.Int16LE=2]="Int16LE",e[e.Int16BE=3]="Int16BE",e[e.Int32LE=4]="Int32LE",e[e.Int32BE=5]="Int32BE",e[e.FloatLE=6]="FloatLE",e[e.FloatBE=7]="FloatBE",e[e.DoubleLE=8]="DoubleLE",e[e.DoubleBE=9]="DoubleBE",e[e.Uint8=10]="Uint8",e[e.Uint16LE=11]="Uint16LE",e[e.Uint16BE=12]="Uint16BE",e[e.Uint32LE=13]="Uint32LE",e[e.Uint32BE=14]="Uint32BE",e[e.BigInt64BE=15]="BigInt64BE",e[e.BigInt64LE=16]="BigInt64LE",e[e.BigUint64BE=17]="BigUint64BE",e[e.BigUint64LE=18]="BigUint64LE"})(l||(l={}));var Ne=new Map([[l.Text,"Text"],[l.Int8,"Int8"],[l.Int16LE,"Int16LE"],[l.Int16BE,"Int16BE"],[l.Int32LE,"Int32LE"],[l.Int32BE,"Int32BE"],[l.FloatLE,"FloatLE"],[l.FloatBE,"FloatBE"],[l.DoubleLE,"DoubleLE"],[l.DoubleBE,"DoubleBE"],[l.Uint8,"UInt8"],[l.Uint16LE,"Uint16LE"],[l.Uint16BE,"Uint16BE"],[l.Uint32LE,"Uint32LE"],[l.Uint32BE,"Uint32BE"],[l.BigInt64BE,"BigInt64BE"],[l.BigInt64LE,"BigInt64LE"],[l.BigUint64BE,"BigUint64BE"],[l.BigUint64LE,"BigUint64LE"]]),W;(function(e){e[e.Unary=0]="Unary",e[e.ClientStream=1]="ClientStream",e[e.ServerStream=2]="ServerStream",e[e.BidirectionalStream=3]="BidirectionalStream"})(W||(W={}));var kt=(re={},g()(re,W.Unary,"Unary Call"),g()(re,W.ClientStream,"Client Stream"),g()(re,W.ServerStream,"Server Stream"),g()(re,W.BidirectionalStream,"Bi-Directional"),re),pe;(function(e){e[e.Proto=0]="Proto",e[e.Env=1]="Env"})(pe||(pe={}));var Ut=a(52677),Pt=a.n(Ut),Re;(function(e){var n=function(){function t(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};te()(this,t),g()(this,"success",void 0),g()(this,"message",void 0),g()(this,"data",void 0),typeof o=="string"&&(o=JSON.parse(o)),this.success=o.success,this.message=o.message,this.data=o.data}return ne()(t,null,[{key:"createFrom",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new t(i)}}]),t}();e.R=n})(Re||(Re={}));var Se;(function(e){var n=function(){function o(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};te()(this,o),g()(this,"id",void 0),g()(this,"key",void 0),g()(this,"value",void 0),g()(this,"parseType",void 0),typeof i=="string"&&(i=JSON.parse(i)),this.id=i.id,this.key=i.key,this.value=i.value,this.parseType=i.parseType}return ne()(o,null,[{key:"createFrom",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new o(s)}}]),o}();e.Metadata=n;var t=function(){function o(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};te()(this,o),g()(this,"id",void 0),g()(this,"protoPath",void 0),g()(this,"serviceName",void 0),g()(this,"serviceFullyName",void 0),g()(this,"methodName",void 0),g()(this,"methodMode",void 0),g()(this,"host",void 0),g()(this,"body",void 0),g()(this,"mds",void 0),g()(this,"includeDirs",void 0),typeof i=="string"&&(i=JSON.parse(i)),this.id=i.id,this.protoPath=i.protoPath,this.serviceName=i.serviceName,this.serviceFullyName=i.serviceFullyName,this.methodName=i.methodName,this.methodMode=i.methodMode,this.host=i.host,this.body=i.body,this.mds=this.convertValues(i.mds,n),this.includeDirs=i.includeDirs}return ne()(o,[{key:"convertValues",value:function(s,u){var d=this,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!s)return s;if(s.slice)return s.map(function(E){return d.convertValues(E,u)});if(Pt()(s)==="object"){if(h){for(var v=0,I=Object.keys(s);v<I.length;v++){var x=I[v];s[x]=new u(s[x])}return s}return new u(s)}return s}}],[{key:"createFrom",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new o(s)}}]),o}();e.RequestData=t})(Se||(Se={}));function wn(e){window.runtime.LogPrint(e)}function xn(e){window.runtime.LogTrace(e)}function Cn(e){window.runtime.LogDebug(e)}function En(e){window.runtime.LogInfo(e)}function jn(e){window.runtime.LogWarning(e)}function In(e){window.runtime.LogError(e)}function Bn(e){window.runtime.LogFatal(e)}function Te(e,n,t){window.runtime.EventsOnMultiple(e,n,t)}function be(e,n){Te(e,n,-1)}function Zn(e){for(var n,t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return(n=window.runtime).EventsOff.apply(n,[e].concat(o))}function Dn(e,n){Te(e,n,1)}function bn(e){var n=[e].slice.call(arguments);return window.runtime.EventsEmit.apply(null,n)}function Ln(){window.runtime.WindowReload()}function kn(){window.runtime.WindowReloadApp()}function Un(){window.runtime.WindowSetSystemDefaultTheme()}function Pn(){window.runtime.WindowSetLightTheme()}function Mn(){window.runtime.WindowSetDarkTheme()}function On(){window.runtime.WindowCenter()}function Wn(e){window.runtime.WindowSetTitle(e)}function Fn(){window.runtime.WindowFullscreen()}function Nn(){window.runtime.WindowUnfullscreen()}function Rn(){return window.runtime.WindowIsFullscreen()}function Tn(){return window.runtime.WindowGetSize()}function An(e,n){window.runtime.WindowSetSize(e,n)}function zn(e,n){window.runtime.WindowSetMaxSize(e,n)}function Vn(e,n){window.runtime.WindowSetMinSize(e,n)}function Hn(e,n){window.runtime.WindowSetPosition(e,n)}function $n(){return window.runtime.WindowGetPosition()}function Gn(){window.runtime.WindowHide()}function Kn(){window.runtime.WindowShow()}function Jn(){window.runtime.WindowMaximise()}function Yn(){window.runtime.WindowToggleMaximise()}function Qn(){window.runtime.WindowUnmaximise()}function Xn(){return window.runtime.WindowIsMaximised()}function qn(){window.runtime.WindowMinimise()}function _n(){window.runtime.WindowUnminimise()}function er(e,n,t,o){window.runtime.WindowSetBackgroundColour(e,n,t,o)}function tr(){return window.runtime.ScreenGetAll()}function nr(){return window.runtime.WindowIsMinimised()}function rr(){return window.runtime.WindowIsNormal()}function ir(e){window.runtime.BrowserOpenURL(e)}function or(){return window.runtime.Environment()}function sr(){window.runtime.Quit()}function ar(){window.runtime.Hide()}function lr(){window.runtime.Show()}var Mt=function(){function e(){te()(this,e),g()(this,"protos",[]),g()(this,"requestCaches",new Map),g()(this,"responseCaches",new Map),g()(this,"runningCaches",new Map),console.log("init rpc store"),(0,je.ky)(this),this.init()}return ne()(e,[{key:"init",value:function(){this.initProto(),this.onEndStream(),this.onResponse()}},{key:"initProto",value:function(){this.protos=de()}},{key:"onEndStream",value:function(){var t=this;be("end",function(o){console.log("end data: ",o),t.runningCaches.set(o,!1)})}},{key:"onResponse",value:function(){var t=this;be("data",function(o){console.log("Response data: ",o);var i=t.responseCaches.get(o.id);if(i==null){t.responseCaches.set(o.id,{body:o.body,mds:o.mds,streams:[o.body]});return}var s=i.streams;s!=null&&(s.unshift(o.body),t.responseCaches.set(o.id,S()(S()({},i),{},{streams:s,mds:o.mds})))})}},{key:"importProto",value:f()().mark(function n(){var t;return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,It();case 2:if(t=i.sent,!(!t.success||t.data==null||t.data.length==0)){i.next=5;break}return i.abrupt("return",{success:!0});case 5:return i.next=7,Fe(t.data,K());case 7:return t=i.sent,pt(t.data),this.initProto(),i.abrupt("return",{success:!0});case 11:case"end":return i.stop()}},n,this)})},{key:"reloadProto",value:f()().mark(function n(){var t,o;return f()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=[],de().forEach(function(u){return t.push(u.path)}),s.next=4,Fe(t,K());case 4:if(o=s.sent,o.success){s.next=8;break}return console.log("reload proto error"),s.abrupt("return");case 8:St(o.data),this.initProto();case 10:case"end":return s.stop()}},n,this)})},{key:"deleteProto",value:f()().mark(function n(t){return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:wt(t),this.initProto();case 2:case"end":return i.stop()}},n,this)})},{key:"saveProto",value:f()().mark(function n(t,o,i){var s,u,d;return f()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(console.log("save proto method",i),s=Ze(t.path),s!=null){v.next=4;break}return v.abrupt("return");case 4:for(s.host=o,u=0;u<s.methods.length;u++)d=s.methods[u],d.id==i.id&&(s.methods[u]=i);De(s),this.initProto();case 8:case"end":return v.stop()}},n,this)})},{key:"send",value:f()().mark(function n(t){return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return this.removeCache(t.id),t.methodMode!=W.Unary&&this.runningCaches.set(t.id,!0),i.next=4,this.push(t,!1);case 4:case"end":return i.stop()}},n,this)})},{key:"push",value:f()().mark(function n(t,o){var i,s;return f()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(i=this.requestCaches.get(t.id),i==null?this.requestCaches.set(t.id,{streams:[t.body]}):(s=i.streams,s==null||s.unshift(t.body),this.requestCaches.set(t.id,{streams:s})),t.includeDirs=K(),!o){d.next=8;break}return d.next=6,Bt(new Se.RequestData(t));case 6:d.next=11;break;case 8:return console.log("send request data",t),d.next=11,Zt(new Se.RequestData(t));case 11:case"end":return d.stop()}},n,this)})},{key:"removeCache",value:f()().mark(function n(t){return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:this.requestCaches.delete(t),this.responseCaches.delete(t),this.runningCaches.delete(t);case 3:case"end":return i.stop()}},n,this)})},{key:"stopStream",value:f()().mark(function n(t){return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("request stop stream"),i.next=3,Dt(t);case 3:this.runningCaches.set(t,!1);case 4:case"end":return i.stop()}},n,this)})}]),e}(),Ae=new bt,ze=new Lt,Ve=new Mt,ie=(0,j.createContext)({includeDirStore:Ae,tabStore:ze,protoStore:Ve}),Ot=a(63463),T=a(71577),He=a(95507),ur=a(70133),$e=a(24969),Wt=a(97937),r=a(85893),Ft=function(){var n=(0,j.useContext)(ie),t=n.includeDirStore;return(0,r.jsx)(Ot.Z,{title:"Import Paths",placement:"left",width:500,open:t.includeDirDrawerVisible,onClose:function(){return t.showIncludeDir(!1)},style:{padding:5},bodyStyle:{padding:5},extra:(0,r.jsx)(T.Z,{type:"link",icon:(0,r.jsx)($e.Z,{}),onClick:function(){return t.addIncludeDir()},children:"Add Path"}),children:(0,r.jsx)(He.ZP,{size:"large",loadMore:(0,r.jsx)("div",{}),dataSource:t.includeDirs,renderItem:function(i){return(0,r.jsx)(He.ZP.Item,{actions:[(0,r.jsx)("a",{onClick:function(){return t.removeIncludeDir(i)},children:(0,r.jsx)(Wt.Z,{})})],children:i})}})})},Nt=(0,ue.Pi)(Ft),A={header:"header___tHXcr",requestStreamHeight:"requestStreamHeight___LV6s3",metadataColumn:"metadataColumn___o3Lum",operatorBtn:"operatorBtn___dpSJd"},Rt=function(){var n=(0,j.useContext)(ie),t=n.tabStore,o=n.protoStore,i=n.includeDirStore,s=(0,j.useState)(!1),u=O()(s,2),d=u[0],h=u[1],v=(0,j.useState)([]),I=O()(v,2),x=I[0],E=I[1],c=(0,j.useState)(""),B=O()(c,2),D=B[0],se=B[1],fe=(0,j.useState)(!0),J=O()(fe,2),ae=J[0],Q=J[1],ve=(0,j.useState)(),F=O()(ve,2),Z=F[0],U=F[1],H=function(p){h(p),p||se("")},b=function(p){E(p),Q(!1)},m=function(p){var C=new Set,w=R()(o.protos),k;try{for(w.s();!(k=w.n()).done;){var z=k.value;z.name.toLowerCase().indexOf(p.toLowerCase())>-1&&C.add(z.path);var M=R()(z.methods),V;try{for(M.s();!(V=M.n()).done;){var L=V.value;L.serviceName.toLowerCase().indexOf(p.toLowerCase())>-1&&C.add(z.path+L.serviceName),L.name.toLowerCase().indexOf(p.toLowerCase())>-1&&C.add(L.id)}}catch(N){M.e(N)}finally{M.f()}}}catch(N){w.e(N)}finally{w.f()}return Array.from(C)},$=function(p){var C=p.target.value,w=m(C);console.log(C,w),E(w),se(C),Q(!0)},y=function(p,C){var w=p.toLowerCase().indexOf(D.toLowerCase()),k=p.substring(0,w),z=p.substring(w,w+D.length),M=p.slice(w+D.length),V=w>-1?(0,r.jsxs)("span",{children:[k,(0,r.jsx)("span",{style:{color:"#f50"},children:z}),M]}):(0,r.jsx)("span",{children:p});return V},fn=function(p){var C=[],w=R()(p),k;try{var z=function(){var L=k.value,N={id:L.path,isProto:!0,name:L.name,title:(0,r.jsx)("span",{style:{width:"100%"},children:y(L.name,D)}),icon:(0,r.jsx)(it.Z,{}),children:[]};if(!L.methods)return"continue";var le=new Map;L.methods.forEach(function(G,X,Sn){var ye=le.get(G.serviceName);ye==null&&(ye=[]),ye.push({proto:{path:L.path,host:L.host},method:G,title:y(G.name,D),icon:(0,r.jsx)(ot.Z,{})}),le.set(G.serviceName,ye)}),le.forEach(function(G,X,Sn){N.children.push({id:L.path+X,title:y(X,D),icon:(0,r.jsx)(st.Z,{}),children:G})}),C.push(N)};for(w.s();!(k=w.n()).done;)var M=z()}catch(V){w.e(V)}finally{w.f()}return C},vn=function(p,C){U(void 0),C.node.isProto&&U({id:C.node.id,name:C.node.name}),C.node.method&&t.openTab({key:p[0].toString(),params:{proto:C.node.proto,method:C.node.method},type:pe.Proto})},mn=function(){var P=q()(f()().mark(function p(){var C;return f()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,o.importProto();case 2:C=k.sent,C.success||we.Z.open({message:"Error while importing protos",description:C.message,icon:(0,r.jsx)(Ee.Z,{style:{color:"red"}})});case 4:case"end":return k.stop()}},p)}));return function(){return P.apply(this,arguments)}}(),gn=function(){o.reloadProto(),Me.ZP.success("Reload protos successful.")},pn=function(){var P=q()(f()().mark(function p(){return f()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(Z!=null){w.next=3;break}return Me.ZP.warn("Please select the deleted proto."),w.abrupt("return");case 3:Oe.Z.confirm({title:"Confirm delete proto",content:"Do you want to remove the proto configuration ".concat(Z.name,"?"),onOk:function(){var z=xt(Z.id),M=R()(z),V;try{for(M.s();!(V=M.n()).done;){var L=V.value,N=R()(t.openTabs),le;try{for(N.s();!(le=N.n()).done;){var G=le.value;if(G.key==L.id){t.remove(G.key);break}}}catch(X){N.e(X)}finally{N.f()}}}catch(X){M.e(X)}finally{M.f()}o.deleteProto(Z.id),U(void 0)}});case 4:case"end":return w.stop()}},p)}));return function(){return P.apply(this,arguments)}}(),Xe=fn(o.protos);return(0,r.jsxs)(_.Z,{style:{height:"100%"},children:[(0,r.jsx)(_.Z.Header,{style:{padding:0,backgroundColor:"white",height:"44px",lineHeight:"44px",borderBottom:"1px solid #f0f0f0"},children:(0,r.jsxs)(xe.Z,{children:[(0,r.jsx)(ee.Z,{flex:"auto",style:{paddingLeft:10,fontSize:18},children:"upRpc"}),(0,r.jsx)(ee.Z,{flex:"100px",children:(0,r.jsxs)(me.Z,{size:8,style:{paddingRight:10},children:[(0,r.jsx)(Y.Z,{title:"Import protos",children:(0,r.jsx)("a",{className:A.operatorBtn,onClick:mn,children:(0,r.jsx)(We.Z,{})})}),(0,r.jsx)(Y.Z,{title:"Reload protos",children:(0,r.jsx)("a",{className:A.operatorBtn,onClick:gn,children:(0,r.jsx)(at.Z,{})})}),(0,r.jsx)(Y.Z,{title:"Delete selectecd proto",children:(0,r.jsx)("a",{className:A.operatorBtn,onClick:pn,children:(0,r.jsx)(lt.Z,{})})}),(0,r.jsx)(Y.Z,{title:"Import dependency paths",children:(0,r.jsx)("a",{className:A.operatorBtn,onClick:function(){return i.showIncludeDir(!i.includeDirDrawerVisible)},children:(0,r.jsx)(ut.Z,{})})}),(0,r.jsx)(Y.Z,{title:"Filter methods",children:(0,r.jsx)("a",{className:A.operatorBtn,onClick:function(){return H(!d)},children:(0,r.jsx)(dt.Z,{})})})]})})]})}),(0,r.jsxs)(_.Z.Content,{style:{backgroundColor:"white",overflow:"auto"},children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ge.Z,{size:"small",placeholder:"Filter Methods",hidden:!d,onChange:$,value:D,style:{marginBottom:5}}),Xe.length==0?(0,r.jsx)("div",{style:{height:"90%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(Ce.Z,{description:"No proto"})}):(0,r.jsx)(rt.Z.DirectoryTree,{onExpand:b,fieldNames:{key:"id",title:"title",children:"children"},expandedKeys:x,autoExpandParent:ae,onSelect:vn,switcherIcon:(0,r.jsx)(ct.Z,{}),defaultExpandedKeys:["0-0-0"],treeData:Xe})]}),(0,r.jsx)(Nt,{})]})]})},Tt=(0,ue.Pi)(Rt),ce=a(70524),oe=a(21369),At=a(63922),Le=a(80284),zt=a(99611),Ge=a(93045),Ke=a(33859),Vt=function(){var n=(0,j.useContext)(ie),t=n.protoStore,o=function(){var i=q()(f()().mark(function s(){var u;return f()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,t.importProto();case 2:u=h.sent,u.success||we.Z.open({message:"Error while importing protos",description:u.message,icon:(0,r.jsx)(Ee.Z,{style:{color:"red"}})});case 4:case"end":return h.stop()}},s)}));return function(){return i.apply(this,arguments)}}();return(0,r.jsx)("div",{style:{height:"90%",width:"90%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(Ke.ZP,{icon:(0,r.jsx)(Ge.Z,{style:{fontSize:120}}),title:"Welcome to use upRpc",subTitle:"Swim in the ocean of knowledge and enjoy it.",extra:(0,r.jsx)(T.Z,{type:"primary",onClick:function(){return o()},icon:(0,r.jsx)($e.Z,{}),children:"Import Protos"})})})},Ht=(0,ue.Pi)(Vt),$t=a(36027),Gt=a(28280),Kt=a(27496),Jt=a(74842),Yt=a(60219),he=a(1769),Je=a(74981),dr=a(90252),cr=a(82679),Ye=a(54907),Qe=function(e){var n=e.value,t=(0,j.useState)("1"),o=O()(t,2),i=o[0],s=o[1];return n==null?(0,r.jsx)(Ce.Z,{image:Ce.Z.PRESENTED_IMAGE_SIMPLE}):(0,r.jsx)(Ye.Z,{activeKey:i,accordion:!0,onChange:function(d){return s(d)},children:n==null?void 0:n.map(function(u,d){return u==null||u==""?!0:(0,r.jsx)(Ye.Z.Panel,{header:"stream-"+((n==null?void 0:n.length)-d),children:(0,r.jsx)("pre",{style:{padding:0},children:u})},d+1)})})},ke=a(52300);function Qt(e,n){if(l.Text==n)return ke.DS.encode(e);var t=new DataView(new ArrayBuffer(16));switch(n){case l.Int8:t.setInt8(0,e);break;case l.Int16LE:t.setInt16(0,e,!0);break;case l.Int16BE:t.setInt16(0,e,!1);break;case l.Int32LE:t.setInt32(0,e,!0);break;case l.Int32BE:t.setInt32(0,e,!1);break;case l.FloatLE:t.setFloat32(0,e,!0);break;case l.FloatBE:t.setFloat32(0,e,!1);break;case l.DoubleLE:t.setFloat64(0,e,!0);break;case l.DoubleBE:t.setFloat64(0,e,!1);break;case l.Uint8:t.setUint8(0,e);break;case l.Uint16LE:t.setUint16(0,e,!0);break;case l.Uint16BE:t.setUint16(0,e,!1);break;case l.Uint32LE:t.setUint32(0,e,!0);break;case l.Uint32BE:t.setUint32(0,e,!1);break;case l.BigInt64LE:t.setBigInt64(0,e,!0);break;case l.BigInt64BE:t.setBigInt64(0,e,!1);break;case l.BigUint64LE:t.setBigUint64(0,e,!0);break;case l.BigUint64BE:t.setBigInt64(0,e,!1);break}return ke.DS.encode(e)}function Xt(e,n){try{if(e=ke.DS.toUint8Array(e),l.Text==n){var t=new TextDecoder().decode(e);return t}var o=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(n){case l.Int8:return o.getInt8(0).toString();case l.Int16LE:return o.getInt16(0,!0).toString();case l.Int16BE:return o.getInt16(0,!1).toString();case l.Int32LE:return o.getInt32(0,!0).toString();case l.Int32BE:return o.getInt32(0,!1).toString();case l.FloatLE:return o.getFloat32(0,!0).toString();case l.FloatBE:return o.getFloat32(0,!1).toString();case l.DoubleLE:return o.getFloat64(0,!0).toString();case l.DoubleBE:return o.getFloat64(0,!1).toString();case l.Uint8:return o.getUint8(0).toString();case l.Uint16LE:return o.getUint16(0,!0).toString();case l.Uint16BE:return o.getUint16(0,!1).toString();case l.Uint32LE:return o.getUint32(0,!0).toString();case l.Uint32BE:return o.getUint32(0,!1).toString();case l.BigInt64LE:return o.getBigInt64(0,!0).toString().toString();case l.BigInt64BE:return o.getBigInt64(0,!1).toString();case l.BigUint64LE:return o.getBigUint64(0,!0).toString();case l.BigUint64BE:return o.getBigInt64(0,!1).toString();default:return"[Buffer ... "+e.length+" bytes]"}}catch{return"decode error"}}var qt=function(e){var n=e.method,t=e.responseCache,o=e.onChange,i=function(x,E,c){if(console.log(" response mds: ",n.responseMds),n.responseMds==null)n.responseMds=[];else for(var B=0;B<n.responseMds.length;B++)n.responseMds[B].id==x&&n.responseMds.splice(B,1);n.responseMds.push({id:x,key:E,parseType:c}),o(S()({},n))},s=function(x){if(n.responseMds==null)return 0;var E=R()(n.responseMds),c;try{for(E.s();!(c=E.n()).done;){var B=c.value;if(B.id==x)return B.parseType}}catch(D){E.e(D)}finally{E.f()}return 0},u=[{title:"KEY",dataIndex:"key",key:"name",width:"200px"},{title:"VALUE",dataIndex:"value",key:"value",render:function(x,E){return(0,r.jsx)(_t,{id:E.id,value:E.value,parseType:s(E.id),onChange:function(B,D){return i(B,E.key,D)}})}}],d=(0,r.jsx)(r.Fragment,{});(t==null?void 0:t.mds)!=null&&(d=(0,r.jsxs)(r.Fragment,{children:[" (",t.mds.length,")"]}));var h=n.mode==W.ServerStream||n.mode==W.BidirectionalStream?{key:"response",label:"Response Stream",children:(0,r.jsx)(Qe,{value:t==null?void 0:t.streams})}:{key:" response",label:"Response",children:(0,r.jsx)(Je.ZP,{style:{background:"#fff"},width:"100%",height:"100%",mode:"json",theme:"textmate",name:"inputs",fontSize:13,cursorStart:2,highlightActiveLine:!1,showPrintMargin:!1,showGutter:!1,value:t==null?void 0:t.body,setOptions:{showLineNumbers:!1,highlightGutterLine:!1,fixedWidthGutter:!1,tabSize:1,displayIndentGuides:!1},readOnly:!0,tabSize:2})};console.log("responseCache: ",t);var v=[h,{label:(0,r.jsxs)(r.Fragment,{children:["Metadata",d]}),key:"matadata",children:(0,r.jsx)(he.Z,{size:"small",bordered:!0,pagination:!1,columns:u,rowKey:"id",dataSource:t==null?void 0:t.mds})}];return(0,r.jsx)(Le.Z,{style:{height:"100%"},animated:!1,items:v})},_t=function(n){var t=n.id,o=n.value,i=n.parseType,s=n.onChange,u=[];return Ne.forEach(function(d,h){return u.push((0,r.jsx)(oe.Z.Option,{value:h.toString(),children:d},h))}),(0,r.jsxs)(xe.Z,{children:[(0,r.jsx)(ee.Z,{flex:"auto",style:{display:"flex",alignItems:"center"},children:Xt(o,i)}),(0,r.jsx)(ee.Z,{flex:"100px",children:(0,r.jsx)(oe.Z,{defaultValue:i.toString(),bordered:!1,onChange:function(h){return s(t,Number.parseInt(h))},style:{width:140},children:u},"s1"+t)})]})},en=a(19632),Ue=a.n(en),tn=a(81474),nn=a(16596),rn=a(3089),on=function(e){var n=e.running,t=e.method,o=e.requestCache,i=e.onChange,s=e.onPush,u=(0,j.useState)(t.requestBody),d=O()(u,2),h=d[0],v=d[1],I=function(Z){i&&i(S()(S()({},t),{},{requestBody:Z})),v(Z)},x=(0,j.useState)(t.requestMds==null?[]:t.requestMds),E=O()(x,2),c=E[0],B=E[1],D=function(Z){c[Z.id]=Z,B(Ue()(c)),i&&i(S()(S()({},t),{},{requestMds:c}))},se=function(){c.push({parseType:0,id:c.length,key:"",value:""}),B(Ue()(c))},fe=function(Z){c.splice(Z,1),B(Ue()(c)),i&&i(S()(S()({},t),{},{requestMds:c}))},J=(0,r.jsx)(r.Fragment,{});c!==null&&c.length>0&&(J=(0,r.jsxs)(r.Fragment,{children:[" (",c.length,")"]}));var ae=t.mode==W.ClientStream||t.mode==W.BidirectionalStream,Q=n&&ae?(0,r.jsx)(T.Z,{size:"small",type:"primary",icon:(0,r.jsx)(nn.Z,{}),onClick:function(){return s(h)},children:"Push"}):"",ve=[{label:"Params",key:"params",children:(0,r.jsx)(Je.ZP,{style:{background:"#fff"},width:"100%",height:"100%",mode:"json",theme:"textmate",name:"inputs",fontSize:13,cursorStart:2,showPrintMargin:!1,showGutter:!0,onChange:I,defaultValue:t.requestBody,setOptions:{useWorker:!0,displayIndentGuides:!0},tabSize:2})},{label:(0,r.jsxs)(r.Fragment,{children:["Metadata",J]}),key:"metadata",children:(0,r.jsxs)(he.Z,{rowKey:"id",size:"small",bordered:!0,pagination:!1,dataSource:c,children:[(0,r.jsx)(he.Z.Column,{className:A.metadataColumn,dataIndex:"key",title:"KEY",width:"30%",render:function(Z,U,H){return(0,r.jsx)(ge.Z,{defaultValue:U.key,onChange:function(m){return D(S()(S()({},U),{},{key:m.target.value}))}},"key"+U.id)}},"key"),(0,r.jsx)(he.Z.Column,{className:A.metadataColumn,dataIndex:"value",title:"VALUE",render:function(Z,U,H){return(0,r.jsx)(sn,{metadata:U,onChange:function(m){return D(S()(S()({},m),{},{key:U.key}))}})}},"value"),(0,r.jsx)(he.Z.Column,{className:A.metadataColumn,dataIndex:"action",align:"center",width:80,title:(0,r.jsx)(Y.Z,{title:"Add metadata",children:(0,r.jsx)(T.Z,{size:"small",type:"text",icon:(0,r.jsx)(We.Z,{}),onClick:se})}),render:function(Z,U,H){return(0,r.jsx)(Y.Z,{title:"Delete metadata",placement:"bottom",children:(0,r.jsx)(T.Z,{size:"small",type:"text",icon:(0,r.jsx)(rn.Z,{}),onClick:function(){return fe(H)}})})}},"action")]})}];return(0,r.jsxs)(ce.oL,{children:[(0,r.jsx)(Le.Z,{style:{height:"100%"},animated:!1,items:ve,tabBarExtraContent:(0,r.jsx)("div",{style:{paddingRight:10},children:Q})}),(0,r.jsx)(ce.oL.Pane,{visible:ae,className:A.requestStreamHeight,children:(0,r.jsx)(tn.Z,{title:"Request Stream",size:"small",bordered:!1,style:{height:"100%",marginTop:"3px"},bodyStyle:{height:"calc(100% - 40px)",overflow:"auto",padding:0},children:(0,r.jsx)(Qe,{value:o==null?void 0:o.streams})})})]})},sn=function(n){var t=n.metadata,o=n.onChange,i=(0,j.useState)(t),s=O()(i,2),u=s[0],d=s[1],h=function(x){d(x),o(x)},v=[];return Ne.forEach(function(I,x){return v.push((0,r.jsx)(oe.Z.Option,{value:x.toString(),children:I},x))}),(0,r.jsxs)("div",{style:{display:"flex"},children:[(0,r.jsx)(ge.Z,{defaultValue:u.value,onChange:function(x){return h(S()(S()({},u),{},{value:x.target.value}))}},"v"+u.id),t.key.endsWith("-bin")?(0,r.jsx)(oe.Z,{defaultValue:u.parseType.toString(),bordered:!1,onChange:function(x){return h(S()(S()({},u),{},{parseType:Number.parseInt(x)}))},style:{width:140},children:v},"s"+u.id):""]})},an=function(n){var t=n.proto,o=n.method,i=(0,j.useContext)(ie),s=i.protoStore,u=i.tabStore,d=(0,j.useState)(t.host),h=O()(d,2),v=h[0],I=h[1],x=(0,j.useState)(o),E=O()(x,2),c=E[0],B=E[1],D=function(m){u.setDot(c.id),I(m)},se=function(m){u.setDot(m.id),B(S()(S()({},m),{},{requestBody:m.requestBody,requestMds:m.requestMds}))},fe=function(m){u.setDot(m.id),B(S()(S()({},m),{},{responseMds:m.responseMds}))},J=function(){var m=[];return c.requestMds!=null&&c.requestMds.length>0&&(m=c.requestMds.map(function($,y){return S()(S()({},$),{},{key:$.key,value:Qt($.value,$.parseType)})})),{id:c.id,body:c.requestBody,mds:m,methodMode:c.mode,methodName:c.name,serviceFullyName:c.serviceFullyName,serviceName:c.serviceName,protoPath:t.path,host:v}},ae=function(){var b=q()(f()().mark(function m(){return f()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,s.push(J(),!0);case 2:case"end":return y.stop()}},m)}));return function(){return b.apply(this,arguments)}}(),Q=function(){var b=q()(f()().mark(function m(){return f()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.prev=0,y.next=3,s.send(J());case 3:y.next=8;break;case 5:y.prev=5,y.t0=y.catch(0),we.Z.open({message:"Calling error",description:y.t0.message,icon:(0,r.jsx)(Ee.Z,{style:{color:"red"}})});case 8:case"end":return y.stop()}},m,null,[[0,5]])}));return function(){return b.apply(this,arguments)}}(),ve=function(){var b=q()(f()().mark(function m(){return f()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,s.stopStream(c.id);case 2:case"end":return y.stop()}},m)}));return function(){return b.apply(this,arguments)}}(),F=function(){s.saveProto(t,v,c),u.setDot(c.id,!1)},Z=s.requestCaches.get(c.id),U=s.responseCaches.get(c.id),H=s.runningCaches.get(c.id);return console.log("running: ",H),(0,r.jsxs)(_.Z,{style:{height:"100%",backgroundColor:"white",padding:"0px 10px"},children:[(0,r.jsx)(_.Z.Header,{className:A.header,style:{paddingBottom:10},children:(0,r.jsxs)(xe.Z,{gutter:5,children:[(0,r.jsx)(ee.Z,{flex:"auto",style:{paddingTop:5},children:(0,r.jsx)(ge.Z,{addonBefore:(0,r.jsxs)(me.Z,{style:{width:110},children:[(0,r.jsx)($t.Z,{}),kt[c.mode]]}),defaultValue:v,onChange:function(m){return D(m.target.value)}})}),(0,r.jsx)(ee.Z,{flex:"160px",children:(0,r.jsxs)(me.Z,{children:[H?(0,r.jsx)(T.Z,{type:"primary",icon:(0,r.jsx)(Gt.Z,{}),onClick:ve,children:"Stop"}):c.mode==W.Unary?(0,r.jsx)(T.Z,{type:"primary",icon:(0,r.jsx)(Kt.Z,{}),onClick:Q,children:"Send"}):(0,r.jsx)(T.Z,{type:"primary",icon:(0,r.jsx)(Jt.Z,{}),onClick:Q,children:"Start"}),(0,r.jsx)(T.Z,{icon:(0,r.jsx)(Yt.Z,{}),onClick:F,children:"Save"})]})})]})}),(0,r.jsx)(_.Z.Content,{children:(0,r.jsxs)(ce.oL,{vertical:!0,children:[(0,r.jsx)(on,{running:H,method:c,requestCache:Z,onChange:se,onPush:ae}),(0,r.jsx)(qt,{method:c,responseCache:U,onChange:fe})]})})]})},ln=(0,ue.Pi)(an),un=function(){var n=(0,j.useContext)(ie),t=n.tabStore,o=n.protoStore,i=function(h,v){typeof h=="string"&&(t.remove(h),o.removeCache(h))},s=(0,r.jsxs)(me.Z,{size:0,style:{marginRight:10},children:[(0,r.jsx)(oe.Z,{defaultValue:"1",style:{width:180},bordered:!1,children:(0,r.jsx)(oe.Z.Option,{value:"1",children:"No Environment"})}),(0,r.jsx)(T.Z,{type:"text",icon:(0,r.jsx)(zt.Z,{}),size:"large"})]});if(t.openTabs.length==0)return(0,r.jsx)(Ht,{});var u=t.openTabs.map(function(d){var h=(0,r.jsx)(r.Fragment,{}),v=d.title;return d.type==pe.Proto&&(v=d.params.method.name,h=(0,r.jsx)(ln,{proto:d.params.proto,method:d.params.method})),{label:(0,r.jsx)(At.Z,{dot:d.dot,offset:[5,8],children:v}),key:d.key,closeable:d.closable,children:h}});return(0,r.jsx)(Le.Z,{hideAdd:!0,type:"editable-card",onEdit:i,style:{height:"100%"},size:"small",items:u,onTabClick:function(h){return t.selectTab(h)},activeKey:t.selectedTab})},dn=(0,ue.Pi)(un),cn=function(){(0,j.useEffect)(function(){console.log("init about effect"),be("about",function(){console.log("about message: ",!0),o(!0)})},[]);var e=(0,j.useState)(!1),n=O()(e,2),t=n[0],o=n[1],i=function(){o(!1)};return(0,r.jsx)(Oe.Z,{title:"About UpRpc",open:t,onCancel:i,footer:null,children:(0,r.jsx)(Ke.ZP,{icon:(0,r.jsx)(Ge.Z,{style:{fontSize:50}}),title:"UpRpc",subTitle:(0,r.jsxs)("div",{children:["version 1.0.0",(0,r.jsx)("br",{}),"Copyright (c) 2022 upbos. All rights reserved."]})})})};function hn(){return(0,r.jsx)(ie.Provider,{value:{includeDirStore:Ae,tabStore:ze,protoStore:Ve},children:(0,r.jsxs)(qe.ZP,{children:[(0,r.jsxs)(ce.oL,{defaultSizes:[75,220],children:[(0,r.jsx)(ce.oL.Pane,{minSize:320,maxSize:600,children:(0,r.jsx)(Tt,{})}),(0,r.jsx)(dn,{})]}),(0,r.jsx)(cn,{})]})})}}}]);
