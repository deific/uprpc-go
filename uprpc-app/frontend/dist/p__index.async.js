"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[866],{84849:function(xn,ke,o){o.r(ke),o.d(ke,{default:function(){return fn}});var Qe=o(42805),Xe=o(15009),f=o.n(Xe),qe=o(99289),Q=o.n(qe),_e=o(97857),p=o.n(_e),et=o(64599),N=o.n(et),tt=o(5574),M=o.n(tt),I=o(67294),oe=o(71217),we=o(13448),Pe=o(16536),Me=o(67040),le=o(26713),ge=o(34895),Ce=o(62986),nt=o(37877),X=o(97183),Ee=o(71230),q=o(15746),J=o(84908),pe=o(80284),rt=o(26911),it=o(69015),st=o(13520),je=o(18429),at=o(238),ot=o(80882),Oe=o(64789),lt=o(33160),ut=o(48689),dt=o(32319),ct=o(26024),ht=o(12444),_=o.n(ht),ft=o(72004),ee=o.n(ft),vt=o(9783),m=o.n(vt),Ie=o(68949),Be="includeDirs",Ze="protos";function mt(t,n,e){var s=N()(t.methods),i;try{for(s.s();!(i=s.n()).done;){var a=i.value;if(n==a.serviceName&&a.name==e)return a}}catch(u){s.e(u)}finally{s.f()}return null}function We(t){for(var n=ue(),e=0,s=n;e<s.length;e++){var i=s[e];if(i.path==t)return i}return null}function ue(){var t=localStorage.getItem(Ze);return t==null?[]:JSON.parse(t)}function gt(t){var n=N()(t),e;try{for(n.s();!(e=n.n()).done;){var s=e.value;De(s)}}catch(i){n.e(i)}finally{n.f()}}function De(t){for(var n=ue(),e=0;e<n.length;e++)if(n[e].path===t.path){n.splice(e,1);break}n.push(t),localStorage.setItem(Ze,JSON.stringify(n))}function pt(t){var n=N()(t),e;try{for(n.s();!(e=n.n()).done;){var s=e.value;St(s)}}catch(i){n.e(i)}finally{n.f()}}function St(t){var n=We(t.path);if(n!=null){var e=p()(p()({},t),{},{host:n.host}),s=N()(e.methods),i;try{for(s.s();!(i=s.n()).done;){var a=i.value,u=mt(n,a.serviceName,a.name);if(u!=null){a.id=u.id,a.requestMds=u.requestMds,a.responseMds=u.responseMds;var d=a.requestBody?JSON.parse(a.requestBody):{},h=u.requestBody?JSON.parse(u.requestBody):{};for(var C in d)h[C]!=null&&(d[C]=h[C]);a.requestBody=JSON.stringify(d,null,"	")}}}catch(E){s.e(E)}finally{s.f()}De(e)}}function yt(t){for(var n=ue(),e=0;e<n.length;e++)if(n[e].path===t){n.splice(e,1);break}localStorage.setItem(Ze,JSON.stringify(n))}function xt(t){var n=We(t);return n==null?[]:n.methods}function G(){var t=localStorage.getItem(Be);return t==null?[]:JSON.parse(t)}function wt(t){for(var n=G(),e=0;e<n.length;e++)if(n[e]===t){n.splice(e,1);break}n.push(t),localStorage.setItem(Be,JSON.stringify(n))}function Ct(t){for(var n=G(),e=0;e<n.length;e++)if(n[e]===t){n.splice(e,1);break}localStorage.setItem(Be,JSON.stringify(n))}function Et(){return window.go.main.Api.OpenIncludeDir()}function jt(){return window.go.main.Api.OpenProto()}function Fe(t,n){return window.go.main.Api.ParseProto(t,n)}function It(t){return window.go.main.Api.Push(t)}function Bt(t){return window.go.main.Api.Send(t)}function Zt(t){return window.go.main.Api.Stop(t)}var Dt=function(){function t(){_()(this,t),m()(this,"includeDirDrawerVisible",!1),m()(this,"includeDirs",[]),console.log("init paths store"),(0,Ie.ky)(this),this.init()}return ee()(t,[{key:"init",value:f()().mark(function n(){return f()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:this.includeDirs=G();case 1:case"end":return s.stop()}},n,this)})},{key:"showIncludeDir",value:function(e){this.includeDirDrawerVisible=e}},{key:"addIncludeDir",value:f()().mark(function n(){var e;return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Et();case 2:e=i.sent,e.success&&e.data!=""&&(wt(e.data),this.includeDirs=G());case 4:case"end":return i.stop()}},n,this)})},{key:"removeIncludeDir",value:f()().mark(function n(e){return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:Ct(e),this.includeDirs=G();case 2:case"end":return i.stop()}},n,this)})}]),t}(),bt=function(){function t(){_()(this,t),m()(this,"selectedTab","1"),m()(this,"openTabs",[]),console.log("init tab store"),(0,Ie.ky)(this)}return ee()(t,[{key:"selectTab",value:function(e){this.selectedTab=e}},{key:"setDot",value:function(e){var s=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.openTabs.forEach(function(a,u){a.key==e&&(a.dot=i,s.openTabs.splice(u,1,a))})}},{key:"openTab",value:function(e){this.openTabs.length==1&&this.openTabs[0].key==="1"&&this.openTabs.splice(0,1);var s=this.openTabs.findIndex(function(i){return i.key===e.key});s==-1&&this.openTabs.push(e),this.selectedTab=e.key}},{key:"remove",value:function(e){var s=this;this.openTabs.forEach(function(i,a){if(i.key==e){if(s.openTabs.splice(a,1),s.openTabs.length==0)return;var u=a<s.openTabs.length?a:s.openTabs.length-1;s.selectedTab=s.openTabs[u].key}})}}]),t}(),te,l;(function(t){t[t.Text=0]="Text",t[t.Int8=1]="Int8",t[t.Int16LE=2]="Int16LE",t[t.Int16BE=3]="Int16BE",t[t.Int32LE=4]="Int32LE",t[t.Int32BE=5]="Int32BE",t[t.FloatLE=6]="FloatLE",t[t.FloatBE=7]="FloatBE",t[t.DoubleLE=8]="DoubleLE",t[t.DoubleBE=9]="DoubleBE",t[t.Uint8=10]="Uint8",t[t.Uint16LE=11]="Uint16LE",t[t.Uint16BE=12]="Uint16BE",t[t.Uint32LE=13]="Uint32LE",t[t.Uint32BE=14]="Uint32BE",t[t.BigInt64BE=15]="BigInt64BE",t[t.BigInt64LE=16]="BigInt64LE",t[t.BigUint64BE=17]="BigUint64BE",t[t.BigUint64LE=18]="BigUint64LE"})(l||(l={}));var Re=new Map([[l.Text,"Text"],[l.Int8,"Int8"],[l.Int16LE,"Int16LE"],[l.Int16BE,"Int16BE"],[l.Int32LE,"Int32LE"],[l.Int32BE,"Int32BE"],[l.FloatLE,"FloatLE"],[l.FloatBE,"FloatBE"],[l.DoubleLE,"DoubleLE"],[l.DoubleBE,"DoubleBE"],[l.Uint8,"UInt8"],[l.Uint16LE,"Uint16LE"],[l.Uint16BE,"Uint16BE"],[l.Uint32LE,"Uint32LE"],[l.Uint32BE,"Uint32BE"],[l.BigInt64BE,"BigInt64BE"],[l.BigInt64LE,"BigInt64LE"],[l.BigUint64BE,"BigUint64BE"],[l.BigUint64LE,"BigUint64LE"]]),O;(function(t){t[t.Unary=0]="Unary",t[t.ClientStream=1]="ClientStream",t[t.ServerStream=2]="ServerStream",t[t.BidirectionalStream=3]="BidirectionalStream"})(O||(O={}));var Lt=(te={},m()(te,O.Unary,"Unary Call"),m()(te,O.ClientStream,"Client Stream"),m()(te,O.ServerStream,"Server Stream"),m()(te,O.BidirectionalStream,"Bi-Directional"),te),Se;(function(t){t[t.Proto=0]="Proto",t[t.Env=1]="Env"})(Se||(Se={}));var Ut=o(52677),kt=o.n(Ut),Ne;(function(t){var n=function(){function e(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_()(this,e),m()(this,"success",void 0),m()(this,"message",void 0),m()(this,"data",void 0),typeof s=="string"&&(s=JSON.parse(s)),this.success=s.success,this.message=s.message,this.data=s.data}return ee()(e,null,[{key:"createFrom",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new e(i)}}]),e}();t.R=n})(Ne||(Ne={}));var ye;(function(t){var n=function(){function s(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_()(this,s),m()(this,"id",void 0),m()(this,"key",void 0),m()(this,"value",void 0),m()(this,"parseType",void 0),typeof i=="string"&&(i=JSON.parse(i)),this.id=i.id,this.key=i.key,this.value=i.value,this.parseType=i.parseType}return ee()(s,null,[{key:"createFrom",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new s(a)}}]),s}();t.Metadata=n;var e=function(){function s(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_()(this,s),m()(this,"id",void 0),m()(this,"protoPath",void 0),m()(this,"serviceName",void 0),m()(this,"serviceFullyName",void 0),m()(this,"methodName",void 0),m()(this,"methodMode",void 0),m()(this,"host",void 0),m()(this,"body",void 0),m()(this,"mds",void 0),m()(this,"includeDirs",void 0),typeof i=="string"&&(i=JSON.parse(i)),this.id=i.id,this.protoPath=i.protoPath,this.serviceName=i.serviceName,this.serviceFullyName=i.serviceFullyName,this.methodName=i.methodName,this.methodMode=i.methodMode,this.host=i.host,this.body=i.body,this.mds=this.convertValues(i.mds,n),this.includeDirs=i.includeDirs}return ee()(s,[{key:"convertValues",value:function(a,u){var d=this,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!a)return a;if(a.slice)return a.map(function(x){return d.convertValues(x,u)});if(kt()(a)==="object"){if(h){for(var C=0,E=Object.keys(a);C<E.length;C++){var S=E[C];a[S]=new u(a[S])}return a}return new u(a)}return a}}],[{key:"createFrom",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new s(a)}}]),s}();t.RequestData=e})(ye||(ye={}));function wn(t){window.runtime.LogPrint(t)}function Cn(t){window.runtime.LogTrace(t)}function En(t){window.runtime.LogDebug(t)}function jn(t){window.runtime.LogInfo(t)}function In(t){window.runtime.LogWarning(t)}function Bn(t){window.runtime.LogError(t)}function Zn(t){window.runtime.LogFatal(t)}function ze(t,n,e){window.runtime.EventsOnMultiple(t,n,e)}function be(t,n){ze(t,n,-1)}function Dn(t){for(var n,e=arguments.length,s=new Array(e>1?e-1:0),i=1;i<e;i++)s[i-1]=arguments[i];return(n=window.runtime).EventsOff.apply(n,[t].concat(s))}function bn(t,n){ze(t,n,1)}function Ln(t){var n=[t].slice.call(arguments);return window.runtime.EventsEmit.apply(null,n)}function Un(){window.runtime.WindowReload()}function kn(){window.runtime.WindowReloadApp()}function Pn(){window.runtime.WindowSetSystemDefaultTheme()}function Mn(){window.runtime.WindowSetLightTheme()}function On(){window.runtime.WindowSetDarkTheme()}function Wn(){window.runtime.WindowCenter()}function Fn(t){window.runtime.WindowSetTitle(t)}function Rn(){window.runtime.WindowFullscreen()}function Nn(){window.runtime.WindowUnfullscreen()}function zn(){return window.runtime.WindowIsFullscreen()}function Tn(){return window.runtime.WindowGetSize()}function An(t,n){window.runtime.WindowSetSize(t,n)}function Vn(t,n){window.runtime.WindowSetMaxSize(t,n)}function Hn(t,n){window.runtime.WindowSetMinSize(t,n)}function $n(t,n){window.runtime.WindowSetPosition(t,n)}function Gn(){return window.runtime.WindowGetPosition()}function Kn(){window.runtime.WindowHide()}function Jn(){window.runtime.WindowShow()}function Yn(){window.runtime.WindowMaximise()}function Qn(){window.runtime.WindowToggleMaximise()}function Xn(){window.runtime.WindowUnmaximise()}function qn(){return window.runtime.WindowIsMaximised()}function _n(){window.runtime.WindowMinimise()}function er(){window.runtime.WindowUnminimise()}function tr(t,n,e,s){window.runtime.WindowSetBackgroundColour(t,n,e,s)}function nr(){return window.runtime.ScreenGetAll()}function rr(){return window.runtime.WindowIsMinimised()}function ir(){return window.runtime.WindowIsNormal()}function sr(t){window.runtime.BrowserOpenURL(t)}function ar(){return window.runtime.Environment()}function or(){window.runtime.Quit()}function lr(){window.runtime.Hide()}function ur(){window.runtime.Show()}var Pt=function(){function t(){_()(this,t),m()(this,"protos",[]),m()(this,"requestCaches",new Map),m()(this,"responseCaches",new Map),m()(this,"runningCaches",new Map),console.log("init rpc store"),(0,Ie.ky)(this),this.init()}return ee()(t,[{key:"init",value:function(){this.initProto(),this.onEndStream(),this.onResponse()}},{key:"initProto",value:function(){this.protos=ue()}},{key:"onEndStream",value:function(){var e=this;be("end",function(s){console.log("end data: ",s),e.runningCaches.set(s,!1)})}},{key:"onResponse",value:function(){var e=this;be("data",function(s){console.log("Response data: ",s);var i=e.responseCaches.get(s.id);if(i==null){e.responseCaches.set(s.id,{body:s.body,mds:s.mds,streams:[s.body]});return}var a=i.streams;a!=null&&(a.unshift(s.body),e.responseCaches.set(s.id,p()(p()({},i),{},{streams:a,mds:s.mds})))})}},{key:"importProto",value:f()().mark(function n(){var e;return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,jt();case 2:if(e=i.sent,!(!e.success||e.data==null||e.data.length==0)){i.next=5;break}return i.abrupt("return",{success:!0});case 5:return i.next=7,Fe(e.data,G());case 7:return e=i.sent,gt(e.data),this.initProto(),i.abrupt("return",{success:!0});case 11:case"end":return i.stop()}},n,this)})},{key:"reloadProto",value:f()().mark(function n(){var e,s;return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=[],ue().forEach(function(u){return e.push(u.path)}),a.next=4,Fe(e,G());case 4:if(s=a.sent,s.success){a.next=8;break}return console.log("reload proto error"),a.abrupt("return");case 8:pt(s.data),this.initProto();case 10:case"end":return a.stop()}},n,this)})},{key:"deleteProto",value:f()().mark(function n(e){return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:yt(e),this.initProto();case 2:case"end":return i.stop()}},n,this)})},{key:"saveProto",value:f()().mark(function n(e,s,i){var a,u;return f()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:for(console.log("save proto method",i),e.host=s,a=0;a<e.methods.length;a++)u=e.methods[a],u.id==i.id&&(e.methods[a]=i);De(e),this.initProto();case 5:case"end":return h.stop()}},n,this)})},{key:"send",value:f()().mark(function n(e){return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return this.removeCache(e.id),e.methodMode!=O.Unary&&this.runningCaches.set(e.id,!0),i.next=4,this.push(e,!1);case 4:case"end":return i.stop()}},n,this)})},{key:"push",value:f()().mark(function n(e,s){var i,a;return f()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(i=this.requestCaches.get(e.id),i==null?this.requestCaches.set(e.id,{streams:[e.body]}):(a=i.streams,a==null||a.unshift(e.body),this.requestCaches.set(e.id,{streams:a})),e.includeDirs=G(),!s){d.next=8;break}return d.next=6,It(new ye.RequestData(e));case 6:d.next=11;break;case 8:return console.log("send request data",e),d.next=11,Bt(new ye.RequestData(e));case 11:case"end":return d.stop()}},n,this)})},{key:"removeCache",value:f()().mark(function n(e){return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:this.requestCaches.delete(e),this.responseCaches.delete(e),this.runningCaches.delete(e);case 3:case"end":return i.stop()}},n,this)})},{key:"stopStream",value:f()().mark(function n(e){return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("request stop stream"),i.next=3,Zt(e);case 3:this.runningCaches.set(e,!1);case 4:case"end":return i.stop()}},n,this)})}]),t}(),Te=new Dt,Ae=new bt,Ve=new Pt,ne=(0,I.createContext)({includeDirStore:Te,tabStore:Ae,protoStore:Ve}),Mt=o(63463),z=o(71577),He=o(95507),dr=o(70133),$e=o(24969),Ot=o(97937),r=o(85893),Wt=function(){var n=(0,I.useContext)(ne),e=n.includeDirStore;return(0,r.jsx)(Mt.Z,{title:"Import Paths",placement:"left",width:500,open:e.includeDirDrawerVisible,onClose:function(){return e.showIncludeDir(!1)},style:{padding:5},bodyStyle:{padding:5},extra:(0,r.jsx)(z.Z,{type:"link",icon:(0,r.jsx)($e.Z,{}),onClick:function(){return e.addIncludeDir()},children:"Add Path"}),children:(0,r.jsx)(He.ZP,{size:"large",loadMore:(0,r.jsx)("div",{}),dataSource:e.includeDirs,renderItem:function(i){return(0,r.jsx)(He.ZP.Item,{actions:[(0,r.jsx)("a",{onClick:function(){return e.removeIncludeDir(i)},children:(0,r.jsx)(Ot.Z,{})})],children:i})}})})},Ft=(0,oe.Pi)(Wt),Rt=function(){var n=(0,I.useContext)(ne),e=n.tabStore,s=n.protoStore,i=n.includeDirStore,a=(0,I.useState)(!1),u=M()(a,2),d=u[0],h=u[1],C=(0,I.useState)([]),E=M()(C,2),S=E[0],x=E[1],c=(0,I.useState)(""),B=M()(c,2),b=B[0],ie=B[1],fe=(0,I.useState)(!0),K=M()(fe,2),se=K[0],Y=K[1],ve=(0,I.useState)(),W=M()(ve,2),Z=W[0],k=W[1],A=function(y){h(y),y||ie("")},L=function(y){x(y),Y(!1)},v=function(y){var j=new Set,g=N()(s.protos),D;try{for(g.s();!(D=g.n()).done;){var T=D.value;T.name.toLowerCase().indexOf(y.toLowerCase())>-1&&j.add(T.path);var U=N()(T.methods),F;try{for(U.s();!(F=U.n()).done;){var H=F.value;H.serviceName.toLowerCase().indexOf(y.toLowerCase())>-1&&j.add(T.path+H.serviceName),H.name.toLowerCase().indexOf(y.toLowerCase())>-1&&j.add(H.id)}}catch(R){U.e(R)}finally{U.f()}}}catch(R){g.e(R)}finally{g.f()}return Array.from(j)},V=function(y){var j=y.target.value,g=v(j);console.log(j,g),x(g),ie(j),Y(!0)},w=function(y,j){var g=y.toLowerCase().indexOf(b.toLowerCase()),D=y.substring(0,g),T=y.substring(g,g+b.length),U=y.slice(g+b.length),F=g>-1?(0,r.jsxs)("span",{children:[D,(0,r.jsx)("span",{style:{color:"#f50"},children:T}),U]}):(0,r.jsx)("span",{children:y});return F},vn=function(y){var j=[],g=N()(y),D;try{var T=function(){var F=D.value,H={id:F.path,title:(0,r.jsx)("span",{style:{width:"100%"},children:w(F.name,b)}),icon:(0,r.jsx)(rt.Z,{}),children:[]},R=new Map;F.methods.forEach(function($,ae,me){var xe=R.get($.serviceName);xe==null&&(xe=[]),xe.push(p()(p()({},$),{},{title:w($.name,b),icon:(0,r.jsx)(it.Z,{})})),R.set($.serviceName,xe)}),R.forEach(function($,ae,me){H.children.push({id:F.path+ae,title:w(ae,b),icon:(0,r.jsx)(st.Z,{}),children:$})}),j.push(H)};for(g.s();!(D=g.n()).done;)T()}catch(U){g.e(U)}finally{g.f()}return j},mn=function(y,j){k(void 0);var g=j.node.pos.split("-");if(g.length==2){var D=s.protos[g[1]];k({id:D.path,name:D.name})}else g.length==4&&e.openTab({key:y[0].toString(),params:j.node.pos,type:Se.Proto})},gn=function(){var P=Q()(f()().mark(function y(){var j;return f()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,s.importProto();case 2:j=D.sent,j.success||we.Z.open({message:"Error while importing protos",description:j.message,icon:(0,r.jsx)(je.Z,{style:{color:"red"}})});case 4:case"end":return D.stop()}},y)}));return function(){return P.apply(this,arguments)}}(),pn=function(){s.reloadProto(),Pe.ZP.success("Reload protos successful.")},Sn=function(){var P=Q()(f()().mark(function y(){return f()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(Z!=null){g.next=3;break}return Pe.ZP.warn("Please select the deleted proto."),g.abrupt("return");case 3:Me.Z.confirm({title:"Confirm delete proto",content:"Do you want to remove the proto configuration ".concat(Z.name,"?"),onOk:function(){var T=xt(Z.id),U=N()(T),F;try{for(U.s();!(F=U.n()).done;){var H=F.value,R=N()(e.openTabs),$;try{for(R.s();!($=R.n()).done;){var ae=$.value;if(ae.key==H.id){e.remove(ae.key);break}}}catch(me){R.e(me)}finally{R.f()}}}catch(me){U.e(me)}finally{U.f()}s.deleteProto(Z.id),k(void 0)}});case 4:case"end":return g.stop()}},y)}));return function(){return P.apply(this,arguments)}}(),Ye=vn(s.protos),yn=[{label:(0,r.jsxs)(le.Z,{direction:"vertical",size:0,align:"center",children:[(0,r.jsx)(at.Z,{style:{fontSize:20,marginRight:0}}),(0,r.jsx)("div",{style:{fontSize:10},children:"GRPC"})]}),key:"1",children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ge.Z,{size:"small",placeholder:"Filter Methods",hidden:!d,onChange:V,value:b,style:{marginBottom:5}}),Ye.length==0?(0,r.jsx)("div",{style:{height:"90%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(Ce.Z,{description:"No proto"})}):(0,r.jsx)(nt.Z.DirectoryTree,{onExpand:L,fieldNames:{key:"id",title:"title",children:"children"},expandedKeys:S,autoExpandParent:se,onSelect:mn,switcherIcon:(0,r.jsx)(ot.Z,{}),defaultExpandedKeys:["0-0-0"],treeData:Ye})]})}];return(0,r.jsxs)(X.Z,{style:{height:"100%"},children:[(0,r.jsx)(X.Z.Header,{style:{padding:0,backgroundColor:"white",height:"44px",lineHeight:"44px",borderBottom:"1px solid #f0f0f0"},children:(0,r.jsxs)(Ee.Z,{children:[(0,r.jsx)(q.Z,{flex:"auto",style:{paddingLeft:10,fontSize:18},children:"upRpc"}),(0,r.jsx)(q.Z,{flex:"100px",children:(0,r.jsxs)(le.Z,{size:8,style:{paddingRight:10},children:[(0,r.jsx)(J.Z,{title:"Import protos",children:(0,r.jsx)("a",{style:{color:"#000000D9",fontSize:16},onClick:gn,children:(0,r.jsx)(Oe.Z,{})})}),(0,r.jsx)(J.Z,{title:"Reload protos",children:(0,r.jsx)("a",{style:{color:"#000000D9",fontSize:16},onClick:pn,children:(0,r.jsx)(lt.Z,{})})}),(0,r.jsx)(J.Z,{title:"Delete selectecd proto",children:(0,r.jsx)("a",{style:{color:"#000000D9",fontSize:16},onClick:Sn,children:(0,r.jsx)(ut.Z,{})})}),(0,r.jsx)(J.Z,{title:"Import dependency paths",children:(0,r.jsx)("a",{style:{color:"#000000D9",fontSize:16},onClick:function(){return i.showIncludeDir(!i.includeDirDrawerVisible)},children:(0,r.jsx)(dt.Z,{})})}),(0,r.jsx)(J.Z,{title:"Filter methods",children:(0,r.jsx)("a",{style:{color:"#000000D9",fontSize:16},onClick:function(){return A(!d)},children:(0,r.jsx)(ct.Z,{})})})]})})]})}),(0,r.jsxs)(X.Z.Content,{style:{backgroundColor:"white"},children:[(0,r.jsx)(pe.Z,{tabPosition:"left",size:"small",style:{height:"100%"},items:yn}),(0,r.jsx)(Ft,{})]})]})},Nt=(0,oe.Pi)(Rt),de=o(70524),re=o(21369),zt=o(63922),Tt=o(99611),At=o(93045),Vt=o(33859),Ht=function(){var n=(0,I.useContext)(ne),e=n.protoStore,s=function(){var i=Q()(f()().mark(function a(){var u;return f()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,e.importProto();case 2:u=h.sent,u.success||we.Z.open({message:"Error while importing protos",description:u.message,icon:(0,r.jsx)(je.Z,{style:{color:"red"}})});case 4:case"end":return h.stop()}},a)}));return function(){return i.apply(this,arguments)}}();return(0,r.jsx)("div",{style:{height:"90%",width:"90%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(Vt.ZP,{icon:(0,r.jsx)(At.Z,{style:{fontSize:120}}),title:"Welcome to use upRpc",subTitle:"Swim in the ocean of knowledge and enjoy it.",extra:(0,r.jsx)(z.Z,{type:"primary",onClick:function(){return s()},icon:(0,r.jsx)($e.Z,{}),children:"Import Protos"})})})},$t=(0,oe.Pi)(Ht),ce={header:"header___tHXcr",requestStreamHeight:"requestStreamHeight___LV6s3",metadataColumn:"metadataColumn___o3Lum"},Gt=o(36027),Kt=o(28280),Jt=o(27496),Yt=o(74842),Qt=o(60219),he=o(1769),Ge=o(74981),cr=o(90252),hr=o(82679),Ke=o(54907),Je=function(t){var n=t.value,e=(0,I.useState)("1"),s=M()(e,2),i=s[0],a=s[1];return n==null?(0,r.jsx)(Ce.Z,{image:Ce.Z.PRESENTED_IMAGE_SIMPLE}):(0,r.jsx)(Ke.Z,{activeKey:i,accordion:!0,onChange:function(d){return a(d)},children:n==null?void 0:n.map(function(u,d){return u==null||u==""?!0:(0,r.jsx)(Ke.Z.Panel,{header:"stream-"+((n==null?void 0:n.length)-d),children:(0,r.jsx)("pre",{style:{padding:0},children:u})},d+1)})})},Le=o(52300);function Xt(t,n){if(l.Text==n)return Le.DS.encode(t);var e=new DataView(new ArrayBuffer(16));switch(n){case l.Int8:e.setInt8(0,t);break;case l.Int16LE:e.setInt16(0,t,!0);break;case l.Int16BE:e.setInt16(0,t,!1);break;case l.Int32LE:e.setInt32(0,t,!0);break;case l.Int32BE:e.setInt32(0,t,!1);break;case l.FloatLE:e.setFloat32(0,t,!0);break;case l.FloatBE:e.setFloat32(0,t,!1);break;case l.DoubleLE:e.setFloat64(0,t,!0);break;case l.DoubleBE:e.setFloat64(0,t,!1);break;case l.Uint8:e.setUint8(0,t);break;case l.Uint16LE:e.setUint16(0,t,!0);break;case l.Uint16BE:e.setUint16(0,t,!1);break;case l.Uint32LE:e.setUint32(0,t,!0);break;case l.Uint32BE:e.setUint32(0,t,!1);break;case l.BigInt64LE:e.setBigInt64(0,t,!0);break;case l.BigInt64BE:e.setBigInt64(0,t,!1);break;case l.BigUint64LE:e.setBigUint64(0,t,!0);break;case l.BigUint64BE:e.setBigInt64(0,t,!1);break}return Le.DS.encode(t)}function qt(t,n){try{if(t=Le.DS.toUint8Array(t),l.Text==n){var e=new TextDecoder().decode(t);return e}var s=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(n){case l.Int8:return s.getInt8(0).toString();case l.Int16LE:return s.getInt16(0,!0).toString();case l.Int16BE:return s.getInt16(0,!1).toString();case l.Int32LE:return s.getInt32(0,!0).toString();case l.Int32BE:return s.getInt32(0,!1).toString();case l.FloatLE:return s.getFloat32(0,!0).toString();case l.FloatBE:return s.getFloat32(0,!1).toString();case l.DoubleLE:return s.getFloat64(0,!0).toString();case l.DoubleBE:return s.getFloat64(0,!1).toString();case l.Uint8:return s.getUint8(0).toString();case l.Uint16LE:return s.getUint16(0,!0).toString();case l.Uint16BE:return s.getUint16(0,!1).toString();case l.Uint32LE:return s.getUint32(0,!0).toString();case l.Uint32BE:return s.getUint32(0,!1).toString();case l.BigInt64LE:return s.getBigInt64(0,!0).toString().toString();case l.BigInt64BE:return s.getBigInt64(0,!1).toString();case l.BigUint64LE:return s.getBigUint64(0,!0).toString();case l.BigUint64BE:return s.getBigInt64(0,!1).toString();default:return"[Buffer ... "+t.length+" bytes]"}}catch{return"decode error"}}var _t=function(t){var n=t.method,e=t.responseCache,s=t.onChange,i=function(S,x,c){if(console.log(" response mds: ",n.responseMds),n.responseMds==null)n.responseMds=[];else for(var B=0;B<n.responseMds.length;B++)n.responseMds[B].id==S&&n.responseMds.splice(B,1);n.responseMds.push({id:S,key:x,parseType:c}),s(p()({},n))},a=function(S){if(n.responseMds==null)return 0;var x=N()(n.responseMds),c;try{for(x.s();!(c=x.n()).done;){var B=c.value;if(B.id==S)return B.parseType}}catch(b){x.e(b)}finally{x.f()}return 0},u=[{title:"KEY",dataIndex:"key",key:"name",width:"200px"},{title:"VALUE",dataIndex:"value",key:"value",render:function(S,x){return(0,r.jsx)(en,{id:x.id,value:x.value,parseType:a(x.id),onChange:function(B,b){return i(B,x.key,b)}})}}],d=(0,r.jsx)(r.Fragment,{});(e==null?void 0:e.mds)!=null&&(d=(0,r.jsxs)(r.Fragment,{children:[" (",e.mds.length,")"]}));var h=n.mode==O.ServerStream||n.mode==O.BidirectionalStream?{key:"response",label:"Response Stream",children:(0,r.jsx)(Je,{value:e==null?void 0:e.streams})}:{key:" response",label:"Response",children:(0,r.jsx)(Ge.ZP,{style:{background:"#fff"},width:"100%",height:"100%",mode:"json",theme:"textmate",name:"inputs",fontSize:13,cursorStart:2,highlightActiveLine:!1,showPrintMargin:!1,showGutter:!1,value:e==null?void 0:e.body,setOptions:{showLineNumbers:!1,highlightGutterLine:!1,fixedWidthGutter:!1,tabSize:1,displayIndentGuides:!1},readOnly:!0,tabSize:2})};console.log("responseCache: ",e);var C=[h,{label:(0,r.jsxs)(r.Fragment,{children:["Metadata",d]}),key:"matadata",children:(0,r.jsx)(he.Z,{size:"small",bordered:!0,pagination:!1,columns:u,rowKey:"id",dataSource:e==null?void 0:e.mds})}];return(0,r.jsx)(pe.Z,{style:{height:"100%"},animated:!1,items:C})},en=function(n){var e=n.id,s=n.value,i=n.parseType,a=n.onChange,u=[];return Re.forEach(function(d,h){return u.push((0,r.jsx)(re.Z.Option,{value:h.toString(),children:d},h))}),(0,r.jsxs)(Ee.Z,{children:[(0,r.jsx)(q.Z,{flex:"auto",style:{display:"flex",alignItems:"center"},children:qt(s,i)}),(0,r.jsx)(q.Z,{flex:"100px",children:(0,r.jsx)(re.Z,{defaultValue:i.toString(),bordered:!1,onChange:function(h){return a(e,Number.parseInt(h))},style:{width:140},children:u},"s1"+e)})]})},tn=o(19632),Ue=o.n(tn),nn=o(81474),rn=o(16596),sn=o(3089),an=function(t){var n=t.running,e=t.method,s=t.requestCache,i=t.onChange,a=t.onPush,u=(0,I.useState)(e.requestBody),d=M()(u,2),h=d[0],C=d[1],E=function(Z){i&&i(p()(p()({},e),{},{requestBody:Z})),C(Z)},S=(0,I.useState)(e.requestMds==null?[]:e.requestMds),x=M()(S,2),c=x[0],B=x[1],b=function(Z){c[Z.id]=Z,B(Ue()(c)),i&&i(p()(p()({},e),{},{requestMds:c}))},ie=function(){c.push({parseType:0,id:c.length,key:"",value:""}),B(Ue()(c))},fe=function(Z){c.splice(Z,1),B(Ue()(c)),i&&i(p()(p()({},e),{},{requestMds:c}))},K=(0,r.jsx)(r.Fragment,{});c!==null&&c.length>0&&(K=(0,r.jsxs)(r.Fragment,{children:[" (",c.length,")"]}));var se=e.mode==O.ClientStream||e.mode==O.BidirectionalStream,Y=n&&se?(0,r.jsx)(z.Z,{size:"small",type:"primary",icon:(0,r.jsx)(rn.Z,{}),onClick:function(){return a(h)},children:"Push"}):"",ve=[{label:"Params",key:"params",children:(0,r.jsx)(Ge.ZP,{style:{background:"#fff"},width:"100%",height:"100%",mode:"json",theme:"textmate",name:"inputs",fontSize:13,cursorStart:2,showPrintMargin:!1,showGutter:!0,onChange:E,defaultValue:e.requestBody,setOptions:{useWorker:!0,displayIndentGuides:!0},tabSize:2})},{label:(0,r.jsxs)(r.Fragment,{children:["Metadata",K]}),key:"metadata",children:(0,r.jsxs)(he.Z,{rowKey:"id",size:"small",bordered:!0,pagination:!1,dataSource:c,children:[(0,r.jsx)(he.Z.Column,{className:ce.metadataColumn,dataIndex:"key",title:"KEY",width:"30%",render:function(Z,k,A){return(0,r.jsx)(ge.Z,{defaultValue:k.key,onChange:function(v){return b(p()(p()({},k),{},{key:v.target.value}))}},"key"+k.id)}},"key"),(0,r.jsx)(he.Z.Column,{className:ce.metadataColumn,dataIndex:"value",title:"VALUE",render:function(Z,k,A){return(0,r.jsx)(on,{metadata:k,onChange:function(v){return b(p()(p()({},v),{},{key:k.key}))}})}},"value"),(0,r.jsx)(he.Z.Column,{className:ce.metadataColumn,dataIndex:"action",align:"center",width:80,title:(0,r.jsx)(J.Z,{title:"Add metadata",children:(0,r.jsx)(z.Z,{size:"small",type:"text",icon:(0,r.jsx)(Oe.Z,{}),onClick:ie})}),render:function(Z,k,A){return(0,r.jsx)(J.Z,{title:"Delete metadata",placement:"bottom",children:(0,r.jsx)(z.Z,{size:"small",type:"text",icon:(0,r.jsx)(sn.Z,{}),onClick:function(){return fe(A)}})})}},"action")]})}];return(0,r.jsxs)(de.oL,{children:[(0,r.jsx)(pe.Z,{style:{height:"100%"},animated:!1,items:ve,tabBarExtraContent:(0,r.jsx)("div",{style:{paddingRight:10},children:Y})}),(0,r.jsx)(de.oL.Pane,{visible:se,className:ce.requestStreamHeight,children:(0,r.jsx)(nn.Z,{title:"Request Stream",size:"small",bordered:!1,style:{height:"100%",marginTop:"3px"},bodyStyle:{height:"calc(100% - 40px)",overflow:"auto",padding:0},children:(0,r.jsx)(Je,{value:s==null?void 0:s.streams})})})]})},on=function(n){var e=n.metadata,s=n.onChange,i=(0,I.useState)(e),a=M()(i,2),u=a[0],d=a[1],h=function(S){d(S),s(S)},C=[];return Re.forEach(function(E,S){return C.push((0,r.jsx)(re.Z.Option,{value:S.toString(),children:E},S))}),(0,r.jsxs)("div",{style:{display:"flex"},children:[(0,r.jsx)(ge.Z,{defaultValue:u.value,onChange:function(S){return h(p()(p()({},u),{},{value:S.target.value}))}},"v"+u.id),e.key.endsWith("-bin")?(0,r.jsx)(re.Z,{defaultValue:u.parseType.toString(),bordered:!1,onChange:function(S){return h(p()(p()({},u),{},{parseType:Number.parseInt(S)}))},style:{width:140},children:C},"s"+u.id):""]})},ln=function(n){var e=n.proto,s=n.method,i=(0,I.useContext)(ne),a=i.protoStore,u=i.tabStore,d=(0,I.useState)(e.host),h=M()(d,2),C=h[0],E=h[1],S=(0,I.useState)(s),x=M()(S,2),c=x[0],B=x[1],b=function(v){u.setDot(c.id),E(v)},ie=function(v){u.setDot(v.id),B(p()(p()({},v),{},{requestBody:v.requestBody,requestMds:v.requestMds}))},fe=function(v){u.setDot(v.id),B(p()(p()({},v),{},{responseMds:v.responseMds}))},K=function(){var v=[];return c.requestMds!=null&&c.requestMds.length>0&&(v=c.requestMds.map(function(V,w){return p()(p()({},V),{},{key:V.key,value:Xt(V.value,V.parseType)})})),{id:c.id,body:c.requestBody,mds:v,methodMode:c.mode,methodName:c.name,serviceFullyName:c.serviceFullyName,serviceName:c.serviceName,protoPath:e.path,host:C}},se=function(){var L=Q()(f()().mark(function v(){return f()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,a.push(K(),!0);case 2:case"end":return w.stop()}},v)}));return function(){return L.apply(this,arguments)}}(),Y=function(){var L=Q()(f()().mark(function v(){return f()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.prev=0,w.next=3,a.send(K());case 3:w.next=8;break;case 5:w.prev=5,w.t0=w.catch(0),we.Z.open({message:"Calling error",description:w.t0.message,icon:(0,r.jsx)(je.Z,{style:{color:"red"}})});case 8:case"end":return w.stop()}},v,null,[[0,5]])}));return function(){return L.apply(this,arguments)}}(),ve=function(){var L=Q()(f()().mark(function v(){return f()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,a.stopStream(c.id);case 2:case"end":return w.stop()}},v)}));return function(){return L.apply(this,arguments)}}(),W=function(){a.saveProto(e,C,c),u.setDot(c.id,!1)},Z=a.requestCaches.get(c.id),k=a.responseCaches.get(c.id),A=a.runningCaches.get(c.id);return console.log("running: ",A),(0,r.jsxs)(X.Z,{style:{height:"100%",backgroundColor:"white",padding:"0px 10px"},children:[(0,r.jsx)(X.Z.Header,{className:ce.header,style:{paddingBottom:10},children:(0,r.jsxs)(Ee.Z,{gutter:5,children:[(0,r.jsx)(q.Z,{flex:"auto",style:{paddingTop:5},children:(0,r.jsx)(ge.Z,{addonBefore:(0,r.jsxs)(le.Z,{style:{width:110},children:[(0,r.jsx)(Gt.Z,{}),Lt[c.mode]]}),defaultValue:C,onChange:function(v){return b(v.target.value)}})}),(0,r.jsx)(q.Z,{flex:"160px",children:(0,r.jsxs)(le.Z,{children:[A?(0,r.jsx)(z.Z,{type:"primary",icon:(0,r.jsx)(Kt.Z,{}),onClick:ve,children:"Stop"}):c.mode==O.Unary?(0,r.jsx)(z.Z,{type:"primary",icon:(0,r.jsx)(Jt.Z,{}),onClick:Y,children:"Send"}):(0,r.jsx)(z.Z,{type:"primary",icon:(0,r.jsx)(Yt.Z,{}),onClick:Y,children:"Start"}),(0,r.jsx)(z.Z,{icon:(0,r.jsx)(Qt.Z,{}),onClick:W,children:"Save"})]})})]})}),(0,r.jsx)(X.Z.Content,{children:(0,r.jsxs)(de.oL,{vertical:!0,children:[(0,r.jsx)(an,{running:A,method:c,requestCache:Z,onChange:ie,onPush:se}),(0,r.jsx)(_t,{method:c,responseCache:k,onChange:fe})]})})]})},un=(0,oe.Pi)(ln),dn=function(){var n=(0,I.useContext)(ne),e=n.tabStore,s=n.protoStore,i=function(h,C){typeof h=="string"&&(e.remove(h),s.removeCache(h))},a=(0,r.jsxs)(le.Z,{size:0,style:{marginRight:10},children:[(0,r.jsx)(re.Z,{defaultValue:"1",style:{width:180},bordered:!1,children:(0,r.jsx)(re.Z.Option,{value:"1",children:"No Environment"})}),(0,r.jsx)(z.Z,{type:"text",icon:(0,r.jsx)(Tt.Z,{}),size:"large"})]});if(e.openTabs.length==0)return(0,r.jsx)($t,{});var u=e.openTabs.map(function(d){var h=(0,r.jsx)(r.Fragment,{}),C=d.title;if(d.type==Se.Proto){var E=d.params.split("-").map(Number),S=s.protos[E[1]],x=S.methods[E[3]];C=x.name,h=(0,r.jsx)(un,{proto:S,method:x})}return{label:(0,r.jsx)(zt.Z,{dot:d.dot,offset:[5,8],children:C}),key:d.key,closeable:d.closable,children:h}});return(0,r.jsx)(pe.Z,{hideAdd:!0,type:"editable-card",onEdit:i,style:{height:"100%"},size:"small",items:u,onTabClick:function(h){return e.selectTab(h)},activeKey:e.selectedTab})},cn=(0,oe.Pi)(dn),hn=function(){(0,I.useEffect)(function(){console.log("init about effect"),be("about",function(){console.log("about message: ",!0),s(!0)})},[]);var t=(0,I.useState)(!1),n=M()(t,2),e=n[0],s=n[1],i=function(){s(!1)};return(0,r.jsxs)(Me.Z,{title:"About UpRpc",open:e,onCancel:i,footer:null,children:[(0,r.jsx)("p",{children:"Icon"}),(0,r.jsx)("p",{children:"UpRpc"}),(0,r.jsx)("p",{children:"Version 1.0.0"}),(0,r.jsx)("p",{children:"Copyright (c) 2022 UpUpc. All rights reserved."})]})};function fn(){return(0,r.jsx)(ne.Provider,{value:{includeDirStore:Te,tabStore:Ae,protoStore:Ve},children:(0,r.jsxs)(Qe.ZP,{children:[(0,r.jsxs)(de.oL,{defaultSizes:[75,220],children:[(0,r.jsx)(de.oL.Pane,{minSize:320,maxSize:600,children:(0,r.jsx)(Nt,{})}),(0,r.jsx)(cn,{})]}),(0,r.jsx)(hn,{})]})})}}}]);
