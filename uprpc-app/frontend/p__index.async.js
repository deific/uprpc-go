"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[866],{62270:function(sn,ke,i){i.r(ke),i.d(ke,{default:function(){return qt}});var Ae=i(42805),He=i(15009),f=i.n(He),Ke=i(99289),X=i.n(Ke),Ge=i(64599),T=i.n(Ge),Je=i(5574),N=i.n(Je),B=i(67294),se=i(71217),Se=i(13448),Le=i(16536),We=i(67040),ie=i(26713),ve=i(34895),ye=i(62986),Ye=i(37877),Q=i(97183),xe=i(71230),q=i(15746),J=i(84908),ge=i(80284),Xe=i(26911),Qe=i(69015),qe=i(13520),Ce=i(18429),_e=i(238),et=i(80882),we=i(64789),tt=i(33160),nt=i(48689),rt=i(32319),at=i(26024),st=i(12444),je=i.n(st),it=i(72004),Ee=i.n(it),ot=i(9783),O=i.n(ot),Ie=i(68949),lt=i(97857),p=i.n(lt),Be="includeDirs",Ze="protos";function ut(n,r,e){var s=T()(n.methods),a;try{for(s.s();!(a=s.n()).done;){var o=a.value;if(r==o.serviceName&&o.name==e)return o}}catch(u){s.e(u)}finally{s.f()}return null}function Ue(n){for(var r=oe(),e=0,s=r;e<s.length;e++){var a=s[e];if(a.path==n)return a}return null}function oe(){var n=localStorage.getItem(Ze);return n==null?[]:JSON.parse(n)}function dt(n){var r=T()(n),e;try{for(r.s();!(e=r.n()).done;){var s=e.value;be(s)}}catch(a){r.e(a)}finally{r.f()}}function be(n){for(var r=oe(),e=0;e<r.length;e++)if(r[e].path===n.path){r.splice(e,1);break}r.push(n),localStorage.setItem(Ze,JSON.stringify(r))}function ct(n){var r=T()(n),e;try{for(r.s();!(e=r.n()).done;){var s=e.value;ht(s)}}catch(a){r.e(a)}finally{r.f()}}function ht(n){var r=Ue(n.path);if(r!=null){var e=p()(p()({},n),{},{host:r.host}),s=T()(e.methods),a;try{for(s.s();!(a=s.n()).done;){var o=a.value,u=ut(r,o.serviceName,o.name);if(u!=null){o.id=u.id,o.requestMds=u.requestMds,o.responseMds=u.responseMds;var h=o.requestBody?JSON.parse(o.requestBody):{},c=u.requestBody?JSON.parse(u.requestBody):{};for(var C in h)c[C]!=null&&(h[C]=c[C]);o.requestBody=JSON.stringify(h,null,"	")}}}catch(E){s.e(E)}finally{s.f()}be(e)}}function ft(n){for(var r=oe(),e=0;e<r.length;e++)if(r[e].path===n){r.splice(e,1);break}localStorage.setItem(Ze,JSON.stringify(r))}function vt(n){var r=Ue(n);return r==null?[]:r.methods}function W(){var n=localStorage.getItem(Be);return n==null?[]:JSON.parse(n)}function gt(n){for(var r=W(),e=0;e<r.length;e++)if(r[e]===n){r.splice(e,1);break}r.push(n),localStorage.setItem(Be,JSON.stringify(r))}function pt(n){for(var r=W(),e=0;e<r.length;e++)if(r[e]===n){r.splice(e,1);break}localStorage.setItem(Be,JSON.stringify(r))}var mt=function(){function n(){je()(this,n),O()(this,"includeDirDrawerVisible",!1),O()(this,"includeDirs",[]),console.log("init paths store"),(0,Ie.ky)(this),this.init()}return Ee()(n,[{key:"init",value:f()().mark(function r(){return f()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:this.includeDirs=W();case 1:case"end":return s.stop()}},r,this)})},{key:"showIncludeDir",value:function(e){this.includeDirDrawerVisible=e}},{key:"addIncludeDir",value:f()().mark(function r(){var e;return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,window.rpc.openIncludeDir();case 2:e=a.sent,e.success&&(gt(e.data),this.includeDirs=W());case 4:case"end":return a.stop()}},r,this)})},{key:"removeIncludeDir",value:f()().mark(function r(e){return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:pt(e);case 1:case"end":return a.stop()}},r)})}]),n}(),St=function(){function n(){je()(this,n),O()(this,"selectedTab","1"),O()(this,"openTabs",[]),console.log("init tab store"),(0,Ie.ky)(this)}return Ee()(n,[{key:"selectTab",value:function(e){this.selectedTab=e}},{key:"setDot",value:function(e){var s=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.openTabs.forEach(function(o,u){o.key==e&&(o.dot=a,s.openTabs.splice(u,1,o))})}},{key:"openTab",value:function(e){this.openTabs.length==1&&this.openTabs[0].key==="1"&&this.openTabs.splice(0,1);var s=this.openTabs.findIndex(function(a){return a.key===e.key});s==-1&&this.openTabs.push(e),this.selectedTab=e.key}},{key:"remove",value:function(e){var s=this;this.openTabs.forEach(function(a,o){if(a.key==e){if(s.openTabs.splice(o,1),s.openTabs.length==0)return;var u=o<s.openTabs.length?o:s.openTabs.length-1;s.selectedTab=s.openTabs[u].key}})}}]),n}(),_,l;(function(n){n[n.Text=0]="Text",n[n.Int8=1]="Int8",n[n.Int16LE=2]="Int16LE",n[n.Int16BE=3]="Int16BE",n[n.Int32LE=4]="Int32LE",n[n.Int32BE=5]="Int32BE",n[n.FloatLE=6]="FloatLE",n[n.FloatBE=7]="FloatBE",n[n.DoubleLE=8]="DoubleLE",n[n.DoubleBE=9]="DoubleBE",n[n.Uint8=10]="Uint8",n[n.Uint16LE=11]="Uint16LE",n[n.Uint16BE=12]="Uint16BE",n[n.Uint32LE=13]="Uint32LE",n[n.Uint32BE=14]="Uint32BE",n[n.BigInt64BE=15]="BigInt64BE",n[n.BigInt64LE=16]="BigInt64LE",n[n.BigUint64BE=17]="BigUint64BE",n[n.BigUint64LE=18]="BigUint64LE"})(l||(l={}));var Pe=new Map([[l.Text,"Text"],[l.Int8,"Int8"],[l.Int16LE,"Int16LE"],[l.Int16BE,"Int16BE"],[l.Int32LE,"Int32LE"],[l.Int32BE,"Int32BE"],[l.FloatLE,"FloatLE"],[l.FloatBE,"FloatBE"],[l.DoubleLE,"DoubleLE"],[l.DoubleBE,"DoubleBE"],[l.Uint8,"UInt8"],[l.Uint16LE,"Uint16LE"],[l.Uint16BE,"Uint16BE"],[l.Uint32LE,"Uint32LE"],[l.Uint32BE,"Uint32BE"],[l.BigInt64BE,"BigInt64BE"],[l.BigInt64LE,"BigInt64LE"],[l.BigUint64BE,"BigUint64BE"],[l.BigUint64LE,"BigUint64LE"]]),M;(function(n){n[n.Unary=0]="Unary",n[n.ClientStream=1]="ClientStream",n[n.ServerStream=2]="ServerStream",n[n.BidirectionalStream=3]="BidirectionalStream"})(M||(M={}));var yt=(_={},O()(_,M.Unary,"Unary Call"),O()(_,M.ClientStream,"Client Stream"),O()(_,M.ServerStream,"Server Stream"),O()(_,M.BidirectionalStream,"Bi-Directional"),_),pe;(function(n){n[n.Proto=0]="Proto",n[n.Env=1]="Env"})(pe||(pe={}));var xt=function(){function n(){je()(this,n),O()(this,"protos",[]),O()(this,"requestCaches",new Map),O()(this,"responseCaches",new Map),O()(this,"runningCaches",new Map),console.log("init rpc store"),(0,Ie.ky)(this),this.init()}return Ee()(n,[{key:"init",value:function(){this.initProto(),this.onEndStream(),this.onResponse()}},{key:"initProto",value:function(){this.protos=oe()}},{key:"onEndStream",value:function(){var e=this;window.rpc.handleEndStream(function(s,a){e.runningCaches.set(a,!1)})}},{key:"onResponse",value:function(){var e=this;window.rpc.handleResponse(function(s,a){console.log("Response data: ",a);var o=e.responseCaches.get(a.id);if(o==null){e.responseCaches.set(a.id,{body:a.body,mds:a.mds,streams:[a.body]});return}var u=o.streams;u!=null&&(u.unshift(a.body),e.responseCaches.set(a.id,p()(p()({},o),{},{streams:u,mds:a.mds})))})}},{key:"importProto",value:f()().mark(function r(){var e;return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,window.rpc.openProto();case 2:if(e=a.sent,e.success){a.next=5;break}return a.abrupt("return",e);case 5:return a.next=7,window.rpc.parseProto(e.data,W());case 7:return e=a.sent,dt(e.data),this.initProto(),a.abrupt("return",{success:!0});case 11:case"end":return a.stop()}},r,this)})},{key:"reloadProto",value:f()().mark(function r(){var e,s;return f()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return e=[],oe().forEach(function(u){return e.push(u.path)}),o.next=4,window.rpc.parseProto(e,W());case 4:if(s=o.sent,s.success){o.next=8;break}return console.log("reload proto error"),o.abrupt("return");case 8:ct(s.data),this.initProto();case 10:case"end":return o.stop()}},r,this)})},{key:"deleteProto",value:f()().mark(function r(e){return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:ft(e),this.initProto();case 2:case"end":return a.stop()}},r,this)})},{key:"saveProto",value:f()().mark(function r(e,s,a){var o,u;return f()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:for(console.log("save proto method",a),e.host=s,o=0;o<e.methods.length;o++)u=e.methods[o],u.id==a.id&&(e.methods[o]=a);be(e),this.initProto();case 5:case"end":return c.stop()}},r,this)})},{key:"send",value:f()().mark(function r(e){return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return this.removeCache(e.id),a.next=3,this.push(e);case 3:e.methodMode!=M.Unary&&this.runningCaches.set(e.id,!0);case 4:case"end":return a.stop()}},r,this)})},{key:"push",value:f()().mark(function r(e){var s,a;return f()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return console.log("send request data",e),s=this.requestCaches.get(e.id),s==null?this.requestCaches.set(e.id,{streams:[e.body]}):(a=s.streams,a==null||a.unshift(e.body),this.requestCaches.set(e.id,{streams:a})),e.includeDirs=W(),u.next=6,window.rpc.send(e);case 6:case"end":return u.stop()}},r,this)})},{key:"removeCache",value:f()().mark(function r(e){return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:this.requestCaches.delete(e),this.responseCaches.delete(e),this.runningCaches.delete(e);case 3:case"end":return a.stop()}},r,this)})},{key:"stopStream",value:f()().mark(function r(e){return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("request stop stream2"),a.next=3,window.rpc.stopStream(e);case 3:this.runningCaches.set(e,!1);case 4:case"end":return a.stop()}},r,this)})}]),n}(),Oe=new mt,Me=new St,Fe=new xt,ee=(0,B.createContext)({includeDirStore:Oe,tabStore:Me,protoStore:Fe}),Ct=i(63463),V=i(71577),Re=i(95507),on=i(70133),ze=i(24969),jt=i(97937),t=i(85893),Et=function(){var r=(0,B.useContext)(ee),e=r.includeDirStore;return(0,t.jsx)(Ct.Z,{title:"Import Paths",placement:"left",width:500,open:e.includeDirDrawerVisible,onClose:function(){return e.showIncludeDir(!1)},style:{padding:5},bodyStyle:{padding:5},extra:(0,t.jsx)(V.Z,{type:"link",icon:(0,t.jsx)(ze.Z,{}),onClick:function(){return e.addIncludeDir()},children:"Add Path"}),children:(0,t.jsx)(Re.ZP,{size:"large",loadMore:(0,t.jsx)("div",{}),dataSource:e.includeDirs,renderItem:function(a){return(0,t.jsx)(Re.ZP.Item,{actions:[(0,t.jsx)("a",{onClick:function(){return e.removeIncludeDir(a)},children:(0,t.jsx)(jt.Z,{})})],children:a})}})})},It=(0,se.Pi)(Et),Bt=function(){var r=(0,B.useContext)(ee),e=r.tabStore,s=r.protoStore,a=r.includeDirStore,o=(0,B.useState)(!1),u=N()(o,2),h=u[0],c=u[1],C=(0,B.useState)([]),E=N()(C,2),S=E[0],x=E[1],d=(0,B.useState)(""),I=N()(d,2),D=I[0],ne=I[1],ce=(0,B.useState)(!0),K=N()(ce,2),re=K[0],Y=K[1],he=(0,B.useState)(),F=N()(he,2),Z=F[0],w=F[1],G=function(m){c(m),m||ne("")},k=function(m){x(m),Y(!1)},v=function(m){var j=new Set,g=T()(s.protos),b;try{for(g.s();!(b=g.n()).done;){var $=b.value;$.name.toLowerCase().indexOf(m.toLowerCase())>-1&&j.add($.path);var L=T()($.methods),R;try{for(L.s();!(R=L.n()).done;){var A=R.value;A.serviceName.toLowerCase().indexOf(m.toLowerCase())>-1&&j.add($.path+A.serviceName),A.name.toLowerCase().indexOf(m.toLowerCase())>-1&&j.add(A.id)}}catch(z){L.e(z)}finally{L.f()}}}catch(z){g.e(z)}finally{g.f()}return Array.from(j)},U=function(m){var j=m.target.value,g=v(j);console.log(j,g),x(g),ne(j),Y(!0)},y=function(m,j){var g=m.toLowerCase().indexOf(D.toLowerCase()),b=m.substring(0,g),$=m.substring(g,g+D.length),L=m.slice(g+D.length),R=g>-1?(0,t.jsxs)("span",{children:[b,(0,t.jsx)("span",{style:{color:"#f50"},children:$}),L]}):(0,t.jsx)("span",{children:m});return R},_t=function(m){var j=[],g=T()(m),b;try{var $=function(){var R=b.value,A={key:R.path,title:(0,t.jsx)("span",{style:{width:"100%"},children:y(R.name,D)}),icon:(0,t.jsx)(Xe.Z,{}),children:[]},z=new Map;R.methods.forEach(function(H,ae,fe){var me=z.get(H.serviceName);me==null&&(me=[]),me.push({key:H.id,title:y(H.name,D),icon:(0,t.jsx)(Qe.Z,{})}),z.set(H.serviceName,me)}),z.forEach(function(H,ae,fe){A.children.push({key:R.path+ae,title:y(ae,D),icon:(0,t.jsx)(qe.Z,{}),children:H})}),j.push(A)};for(g.s();!(b=g.n()).done;)$()}catch(L){g.e(L)}finally{g.f()}return j},en=function(m,j){w(void 0);var g=j.node.pos.split("-");if(g.length==2){var b=s.protos[g[1]];w({id:b.path,name:b.name})}else g.length==4&&e.openTab({key:m[0].toString(),params:j.node.pos,type:pe.Proto})},tn=function(){var P=X()(f()().mark(function m(){var j;return f()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,s.importProto();case 2:j=b.sent,j.success||Se.Z.open({message:"Error while importing protos",description:j.message,icon:(0,t.jsx)(Ce.Z,{style:{color:"red"}})});case 4:case"end":return b.stop()}},m)}));return function(){return P.apply(this,arguments)}}(),nn=function(){s.reloadProto(),Le.ZP.success("Reload protos successful.")},rn=function(){var P=X()(f()().mark(function m(){return f()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(Z!=null){g.next=3;break}return Le.ZP.warn("Please select the deleted proto."),g.abrupt("return");case 3:We.Z.confirm({title:"Confirm delete proto",content:"Do you want to remove the proto configuration ".concat(Z.name,"?"),onOk:function(){var $=vt(Z.id),L=T()($),R;try{for(L.s();!(R=L.n()).done;){var A=R.value,z=T()(e.openTabs),H;try{for(z.s();!(H=z.n()).done;){var ae=H.value;if(ae.key==A.id){e.remove(ae.key);break}}}catch(fe){z.e(fe)}finally{z.f()}}}catch(fe){L.e(fe)}finally{L.f()}s.deleteProto(Z.id),w(void 0)}});case 4:case"end":return g.stop()}},m)}));return function(){return P.apply(this,arguments)}}(),$e=_t(s.protos),an=[{label:(0,t.jsxs)(ie.Z,{direction:"vertical",size:0,align:"center",children:[(0,t.jsx)(_e.Z,{style:{fontSize:20,marginRight:0}}),(0,t.jsx)("div",{style:{fontSize:10},children:"GRPC"})]}),key:"1",children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ve.Z,{size:"small",placeholder:"Filter Methods",hidden:!h,onChange:U,value:D,style:{marginBottom:5}}),$e.length==0?(0,t.jsx)("div",{style:{height:"90%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,t.jsx)(ye.Z,{description:"No proto"})}):(0,t.jsx)(Ye.Z.DirectoryTree,{onExpand:k,expandedKeys:S,autoExpandParent:re,onSelect:en,switcherIcon:(0,t.jsx)(et.Z,{}),defaultExpandedKeys:["0-0-0"],treeData:$e})]})}];return(0,t.jsxs)(Q.Z,{style:{height:"100%"},children:[(0,t.jsx)(Q.Z.Header,{style:{padding:0,backgroundColor:"white",height:"44px",lineHeight:"44px",borderBottom:"1px solid #f0f0f0"},children:(0,t.jsxs)(xe.Z,{children:[(0,t.jsx)(q.Z,{flex:"auto",style:{paddingLeft:10,fontSize:18},children:"upRpc"}),(0,t.jsx)(q.Z,{flex:"100px",children:(0,t.jsxs)(ie.Z,{size:8,style:{paddingRight:10},children:[(0,t.jsx)(J.Z,{title:"Import protos",children:(0,t.jsx)("a",{style:{color:"#000000D9",fontSize:16},onClick:tn,children:(0,t.jsx)(we.Z,{})})}),(0,t.jsx)(J.Z,{title:"Reload protos",children:(0,t.jsx)("a",{style:{color:"#000000D9",fontSize:16},onClick:nn,children:(0,t.jsx)(tt.Z,{})})}),(0,t.jsx)(J.Z,{title:"Delete selectecd proto",children:(0,t.jsx)("a",{style:{color:"#000000D9",fontSize:16},onClick:rn,children:(0,t.jsx)(nt.Z,{})})}),(0,t.jsx)(J.Z,{title:"Import dependency paths",children:(0,t.jsx)("a",{style:{color:"#000000D9",fontSize:16},onClick:function(){return a.showIncludeDir(!a.includeDirDrawerVisible)},children:(0,t.jsx)(rt.Z,{})})}),(0,t.jsx)(J.Z,{title:"Filter methods",children:(0,t.jsx)("a",{style:{color:"#000000D9",fontSize:16},onClick:function(){return G(!h)},children:(0,t.jsx)(at.Z,{})})})]})})]})}),(0,t.jsxs)(Q.Z.Content,{style:{backgroundColor:"white"},children:[(0,t.jsx)(ge.Z,{tabPosition:"left",size:"small",style:{height:"100%"},items:an}),(0,t.jsx)(It,{})]})]})},Zt=(0,se.Pi)(Bt),le=i(70524),te=i(21369),bt=i(63922),Dt=i(99611),kt=i(93045),Lt=i(33859),wt=function(){var r=(0,B.useContext)(ee),e=r.protoStore,s=function(){var a=X()(f()().mark(function o(){var u;return f()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,e.importProto();case 2:u=c.sent,u.success||Se.Z.open({message:"Error while importing protos",description:u.message,icon:(0,t.jsx)(Ce.Z,{style:{color:"red"}})});case 4:case"end":return c.stop()}},o)}));return function(){return a.apply(this,arguments)}}();return(0,t.jsx)("div",{style:{height:"90%",width:"90%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,t.jsx)(Lt.ZP,{icon:(0,t.jsx)(kt.Z,{style:{fontSize:120}}),title:"Welcome to use upRpc",subTitle:"Swim in the ocean of knowledge and enjoy it.",extra:(0,t.jsx)(V.Z,{type:"primary",onClick:function(){return s()},icon:(0,t.jsx)(ze.Z,{}),children:"Import Protos"})})})},Ut=(0,se.Pi)(wt),ue={header:"header___tHXcr",requestStreamHeight:"requestStreamHeight___LV6s3",metadataColumn:"metadataColumn___o3Lum"},Pt=i(36027),Ot=i(28280),Mt=i(27496),Ft=i(74842),Rt=i(60219),de=i(1769),Ne=i(74981),ln=i(90252),un=i(82679),Te=i(54907),Ve=function(n){var r=n.value,e=(0,B.useState)("1"),s=N()(e,2),a=s[0],o=s[1];return r==null?(0,t.jsx)(ye.Z,{image:ye.Z.PRESENTED_IMAGE_SIMPLE}):(0,t.jsx)(Te.Z,{activeKey:a,accordion:!0,onChange:function(h){return o(h)},children:r==null?void 0:r.map(function(u,h){return u==null||u==""?!0:(0,t.jsx)(Te.Z.Panel,{header:"stream-"+((r==null?void 0:r.length)-h),children:(0,t.jsx)("pre",{style:{padding:0},children:u})},h+1)})})};function zt(n,r){if(l.Text==r)return new TextEncoder().encode(n);var e=new DataView(new ArrayBuffer(16));switch(r){case l.Int8:e.setInt8(0,n);break;case l.Int16LE:e.setInt16(0,n,!0);break;case l.Int16BE:e.setInt16(0,n,!1);break;case l.Int32LE:e.setInt32(0,n,!0);break;case l.Int32BE:e.setInt32(0,n,!1);break;case l.FloatLE:e.setFloat32(0,n,!0);break;case l.FloatBE:e.setFloat32(0,n,!1);break;case l.DoubleLE:e.setFloat64(0,n,!0);break;case l.DoubleBE:e.setFloat64(0,n,!1);break;case l.Uint8:e.setUint8(0,n);break;case l.Uint16LE:e.setUint16(0,n,!0);break;case l.Uint16BE:e.setUint16(0,n,!1);break;case l.Uint32LE:e.setUint32(0,n,!0);break;case l.Uint32BE:e.setUint32(0,n,!1);break;case l.BigInt64LE:e.setBigInt64(0,n,!0);break;case l.BigInt64BE:e.setBigInt64(0,n,!1);break;case l.BigUint64LE:e.setBigUint64(0,n,!0);break;case l.BigUint64BE:e.setBigInt64(0,n,!1);break}return e}function Nt(n,r){if(l.Text==r)return new TextDecoder().decode(n);var e=new DataView(n.buffer,n.byteOffset,n.byteLength);try{switch(r){case l.Int8:return e.getInt8(0).toString();case l.Int16LE:return e.getInt16(0,!0).toString();case l.Int16BE:return e.getInt16(0,!1).toString();case l.Int32LE:return e.getInt32(0,!0).toString();case l.Int32BE:return e.getInt32(0,!1).toString();case l.FloatLE:return e.getFloat32(0,!0).toString();case l.FloatBE:return e.getFloat32(0,!1).toString();case l.DoubleLE:return e.getFloat64(0,!0).toString();case l.DoubleBE:return e.getFloat64(0,!1).toString();case l.Uint8:return e.getUint8(0).toString();case l.Uint16LE:return e.getUint16(0,!0).toString();case l.Uint16BE:return e.getUint16(0,!1).toString();case l.Uint32LE:return e.getUint32(0,!0).toString();case l.Uint32BE:return e.getUint32(0,!1).toString();case l.BigInt64LE:return e.getBigInt64(0,!0).toString().toString();case l.BigInt64BE:return e.getBigInt64(0,!1).toString();case l.BigUint64LE:return e.getBigUint64(0,!0).toString();case l.BigUint64BE:return e.getBigInt64(0,!1).toString();default:return"[Buffer ... "+n.length+" bytes]"}}catch{return"decode error"}}var Tt=function(n){var r=n.method,e=n.responseCache,s=n.onChange,a=function(S,x,d){if(console.log(" response mds: ",r.responseMds),r.responseMds==null)r.responseMds=[];else for(var I=0;I<r.responseMds.length;I++)r.responseMds[I].id==S&&r.responseMds.splice(I,1);r.responseMds.push({id:S,key:x,parseType:d}),s(p()({},r))},o=function(S){if(r.responseMds==null)return 0;var x=T()(r.responseMds),d;try{for(x.s();!(d=x.n()).done;){var I=d.value;if(I.id==S)return I.parseType}}catch(D){x.e(D)}finally{x.f()}return 0},u=[{title:"KEY",dataIndex:"key",key:"name",width:"200px"},{title:"VALUE",dataIndex:"value",key:"value",render:function(S,x){return/-bin$/.test(x.key)?(0,t.jsx)(Vt,{id:x.id,value:x.value,parseType:o(x.id),onChange:function(I,D){return a(I,x.key,D)}}):S}}],h=(0,t.jsx)(t.Fragment,{});(e==null?void 0:e.mds)!=null&&(h=(0,t.jsxs)(t.Fragment,{children:[" (",e.mds.length,")"]}));var c=r.mode==M.ServerStream||r.mode==M.BidirectionalStream?{key:"response",label:"Response Stream",children:(0,t.jsx)(Ve,{value:e==null?void 0:e.streams})}:{key:" response",label:"Response",children:(0,t.jsx)(Ne.ZP,{style:{background:"#fff"},width:"100%",height:"100%",mode:"json",theme:"textmate",name:"inputs",fontSize:13,cursorStart:2,highlightActiveLine:!1,showPrintMargin:!1,showGutter:!1,value:e==null?void 0:e.body,setOptions:{showLineNumbers:!1,highlightGutterLine:!1,fixedWidthGutter:!1,tabSize:1,displayIndentGuides:!1},readOnly:!0,tabSize:2})};console.log("responseCache: ",e);var C=[c,{label:(0,t.jsxs)(t.Fragment,{children:["Metadata",h]}),key:"matadata",children:(0,t.jsx)(de.Z,{size:"small",bordered:!0,pagination:!1,columns:u,rowKey:"id",dataSource:e==null?void 0:e.mds})}];return(0,t.jsx)(ge.Z,{style:{height:"100%"},animated:!1,items:C})},Vt=function(r){var e=r.id,s=r.value,a=r.parseType,o=r.onChange,u=[];return Pe.forEach(function(h,c){return u.push((0,t.jsx)(te.Z.Option,{value:c.toString(),children:h},c))}),(0,t.jsxs)(xe.Z,{children:[(0,t.jsx)(q.Z,{flex:"auto",style:{display:"flex",alignItems:"center"},children:Nt(s,a)}),(0,t.jsx)(q.Z,{flex:"100px",children:(0,t.jsx)(te.Z,{defaultValue:a.toString(),bordered:!1,onChange:function(c){return o(e,Number.parseInt(c))},style:{width:140},children:u},"s1"+e)})]})},$t=i(19632),De=i.n($t),At=i(81474),Ht=i(16596),Kt=i(3089),Gt=function(n){var r=n.running,e=n.method,s=n.requestCache,a=n.onChange,o=n.onPush,u=(0,B.useState)(e.requestBody),h=N()(u,2),c=h[0],C=h[1],E=function(Z){a&&a(p()(p()({},e),{},{requestBody:Z})),C(Z)},S=(0,B.useState)(e.requestMds==null?[]:e.requestMds),x=N()(S,2),d=x[0],I=x[1],D=function(Z){d[Z.id]=Z,I(De()(d)),a&&a(p()(p()({},e),{},{requestMds:d}))},ne=function(){d.push({parseType:0,id:d.length,key:"",value:""}),I(De()(d))},ce=function(Z){d.splice(Z,1),I(De()(d)),a&&a(p()(p()({},e),{},{requestMds:d}))},K=(0,t.jsx)(t.Fragment,{});d!==null&&d.length>0&&(K=(0,t.jsxs)(t.Fragment,{children:[" (",d.length,")"]}));var re=e.mode==M.ClientStream||e.mode==M.BidirectionalStream,Y=r&&re?(0,t.jsx)(V.Z,{size:"small",type:"primary",icon:(0,t.jsx)(Ht.Z,{}),onClick:function(){return o(c)},children:"Push"}):"",he=[{label:"Params",key:"params",children:(0,t.jsx)(Ne.ZP,{style:{background:"#fff"},width:"100%",height:"100%",mode:"json",theme:"textmate",name:"inputs",fontSize:13,cursorStart:2,showPrintMargin:!1,showGutter:!0,onChange:E,defaultValue:e.requestBody,setOptions:{useWorker:!0,displayIndentGuides:!0},tabSize:2})},{label:(0,t.jsxs)(t.Fragment,{children:["Metadata",K]}),key:"metadata",children:(0,t.jsxs)(de.Z,{rowKey:"id",size:"small",bordered:!0,pagination:!1,dataSource:d,children:[(0,t.jsx)(de.Z.Column,{className:ue.metadataColumn,dataIndex:"key",title:"KEY",width:"30%",render:function(Z,w,G){return(0,t.jsx)(ve.Z,{defaultValue:w.key,onChange:function(v){return D(p()(p()({},w),{},{key:v.target.value}))}},"key"+w.id)}},"key"),(0,t.jsx)(de.Z.Column,{className:ue.metadataColumn,dataIndex:"value",title:"VALUE",render:function(Z,w,G){return(0,t.jsx)(Jt,{metadata:w,onChange:function(v){return D(p()(p()({},v),{},{key:w.key}))}})}},"value"),(0,t.jsx)(de.Z.Column,{className:ue.metadataColumn,dataIndex:"action",align:"center",width:80,title:(0,t.jsx)(J.Z,{title:"Add metadata",children:(0,t.jsx)(V.Z,{size:"small",type:"text",icon:(0,t.jsx)(we.Z,{}),onClick:ne})}),render:function(Z,w,G){return(0,t.jsx)(J.Z,{title:"Delete metadata",placement:"bottom",children:(0,t.jsx)(V.Z,{size:"small",type:"text",icon:(0,t.jsx)(Kt.Z,{}),onClick:function(){return ce(G)}})})}},"action")]})}];return(0,t.jsxs)(le.oL,{children:[(0,t.jsx)(ge.Z,{style:{height:"100%"},animated:!1,items:he,tabBarExtraContent:(0,t.jsx)("div",{style:{paddingRight:10},children:Y})}),(0,t.jsx)(le.oL.Pane,{visible:re,className:ue.requestStreamHeight,children:(0,t.jsx)(At.Z,{title:"Request Stream",size:"small",bordered:!1,style:{height:"100%",marginTop:"3px"},bodyStyle:{height:"calc(100% - 40px)",overflow:"auto",padding:0},children:(0,t.jsx)(Ve,{value:s==null?void 0:s.streams})})})]})},Jt=function(r){var e=r.metadata,s=r.onChange,a=(0,B.useState)(e),o=N()(a,2),u=o[0],h=o[1],c=function(S){h(S),s(S)},C=[];return Pe.forEach(function(E,S){return C.push((0,t.jsx)(te.Z.Option,{value:S.toString(),children:E},S))}),(0,t.jsxs)("div",{style:{display:"flex"},children:[(0,t.jsx)(ve.Z,{defaultValue:u.value,onChange:function(S){return c(p()(p()({},u),{},{value:S.target.value}))}},"v"+u.id),e.key.endsWith("-bin")?(0,t.jsx)(te.Z,{defaultValue:u.parseType.toString(),bordered:!1,onChange:function(S){return c(p()(p()({},u),{},{parseType:Number.parseInt(S)}))},style:{width:140},children:C},"s"+u.id):""]})},Wt=function(r){var e=r.proto,s=r.method,a=(0,B.useContext)(ee),o=a.protoStore,u=a.tabStore,h=(0,B.useState)(e.host),c=N()(h,2),C=c[0],E=c[1],S=(0,B.useState)(s),x=N()(S,2),d=x[0],I=x[1],D=function(v){u.setDot(d.id),E(v)},ne=function(v){u.setDot(v.id),I(p()(p()({},v),{},{requestBody:v.requestBody,requestMds:v.requestMds}))},ce=function(v){u.setDot(v.id),I(p()(p()({},v),{},{responseMds:v.responseMds}))},K=function(){var v=[];return d.requestMds!=null&&d.requestMds.length>0&&(v=d.requestMds.map(function(U,y){return U.key.endsWith("-bin")?p()(p()({},U),{},{key:U.key,value:zt(U.value,U.parseType)}):p()(p()({},U),{},{key:U.key,value:U.value})})),{id:d.id,body:d.requestBody,mds:v,methodMode:d.mode,methodName:d.name,namespace:d.namespace,serviceName:d.serviceName,protoPath:e.path,host:C}},re=function(){var k=X()(f()().mark(function v(){return f()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,o.push(K());case 2:case"end":return y.stop()}},v)}));return function(){return k.apply(this,arguments)}}(),Y=function(){var k=X()(f()().mark(function v(){return f()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.prev=0,y.next=3,o.send(K());case 3:y.next=8;break;case 5:y.prev=5,y.t0=y.catch(0),Se.Z.open({message:"Calling error",description:y.t0.message,icon:(0,t.jsx)(Ce.Z,{style:{color:"red"}})});case 8:case"end":return y.stop()}},v,null,[[0,5]])}));return function(){return k.apply(this,arguments)}}(),he=function(){var k=X()(f()().mark(function v(){return f()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,o.stopStream(d.id);case 2:case"end":return y.stop()}},v)}));return function(){return k.apply(this,arguments)}}(),F=function(){o.saveProto(e,C,d),u.setDot(d.id,!1)},Z=o.requestCaches.get(d.id),w=o.responseCaches.get(d.id),G=o.runningCaches.get(d.id);return(0,t.jsxs)(Q.Z,{style:{height:"100%",backgroundColor:"white",padding:"0px 10px"},children:[(0,t.jsx)(Q.Z.Header,{className:ue.header,style:{paddingBottom:10},children:(0,t.jsxs)(xe.Z,{gutter:5,children:[(0,t.jsx)(q.Z,{flex:"auto",style:{paddingTop:5},children:(0,t.jsx)(ve.Z,{addonBefore:(0,t.jsxs)(ie.Z,{style:{width:110},children:[(0,t.jsx)(Pt.Z,{}),yt[d.mode]]}),defaultValue:C,onChange:function(v){return D(v.target.value)}})}),(0,t.jsx)(q.Z,{flex:"160px",children:(0,t.jsxs)(ie.Z,{children:[G?(0,t.jsx)(V.Z,{type:"primary",icon:(0,t.jsx)(Ot.Z,{}),onClick:he,children:"Stop"}):d.mode==M.Unary?(0,t.jsx)(V.Z,{type:"primary",icon:(0,t.jsx)(Mt.Z,{}),onClick:Y,children:"Send"}):(0,t.jsx)(V.Z,{type:"primary",icon:(0,t.jsx)(Ft.Z,{}),onClick:Y,children:"Start"}),(0,t.jsx)(V.Z,{icon:(0,t.jsx)(Rt.Z,{}),onClick:F,children:"Save"})]})})]})}),(0,t.jsx)(Q.Z.Content,{children:(0,t.jsxs)(le.oL,{vertical:!0,children:[(0,t.jsx)(Gt,{running:G,method:d,requestCache:Z,onChange:ne,onPush:re}),(0,t.jsx)(Tt,{method:d,responseCache:w,onChange:ce})]})})]})},Yt=(0,se.Pi)(Wt),Xt=function(){var r=(0,B.useContext)(ee),e=r.tabStore,s=r.protoStore,a=function(c,C){typeof c=="string"&&(e.remove(c),s.removeCache(c))},o=(0,t.jsxs)(ie.Z,{size:0,style:{marginRight:10},children:[(0,t.jsx)(te.Z,{defaultValue:"1",style:{width:180},bordered:!1,children:(0,t.jsx)(te.Z.Option,{value:"1",children:"No Environment"})}),(0,t.jsx)(V.Z,{type:"text",icon:(0,t.jsx)(Dt.Z,{}),size:"large"})]});if(e.openTabs.length==0)return(0,t.jsx)(Ut,{});var u=e.openTabs.map(function(h){var c=(0,t.jsx)(t.Fragment,{}),C=h.title;if(h.type==pe.Proto){var E=h.params.split("-").map(Number),S=s.protos[E[1]],x=S.methods[E[3]];C=x.name,c=(0,t.jsx)(Yt,{proto:S,method:x})}return{label:(0,t.jsx)(bt.Z,{dot:h.dot,offset:[5,8],children:C}),key:h.key,closeable:h.closable,children:c}});return(0,t.jsx)(ge.Z,{hideAdd:!0,type:"editable-card",onEdit:a,style:{height:"100%"},size:"small",items:u,onTabClick:function(c){return e.selectTab(c)},activeKey:e.selectedTab})},Qt=(0,se.Pi)(Xt);function qt(){return(0,t.jsx)(ee.Provider,{value:{includeDirStore:Oe,tabStore:Me,protoStore:Fe},children:(0,t.jsx)(Ae.ZP,{children:(0,t.jsxs)(le.oL,{defaultSizes:[75,220],children:[(0,t.jsx)(le.oL.Pane,{minSize:320,maxSize:600,children:(0,t.jsx)(Zt,{})}),(0,t.jsx)(Qt,{})]})})})}}}]);
